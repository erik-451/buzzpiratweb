<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="alternate" type="text/html" href="/docs/how-to-use/_print/">
<link rel="alternate" type="application/rss&#43;xml" href="/docs/how-to-use/index.xml">
<meta name="robots" content="index, follow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>How to use | buzzpirat</title>
<meta name="description" content="How to use your Buzzpirat mod from dangerousprototypes">
<meta property="og:title" content="How to use" />
<meta property="og:description" content="How to use your Buzzpirat mod from dangerousprototypes" />
<meta property="og:type" content="website" />
<meta property="og:url" content="/docs/how-to-use/" /><meta property="og:site_name" content="buzzpirat" />
<meta itemprop="name" content="How to use">
<meta itemprop="description" content="How to use your Buzzpirat mod from dangerousprototypes"><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="How to use"/>
<meta name="twitter:description" content="How to use your Buzzpirat mod from dangerousprototypes"/>




<link rel="preload" href="/scss/main.min.32eaa2fda0f7c82e78980a4fdfc08c5d0d69e751112d336c36776a89ea96acec.css" as="style">
<link href="/scss/main.min.32eaa2fda0f7c82e78980a4fdfc08c5d0d69e751112d336c36776a89ea96acec.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.6.3.min.js"
  integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ=="
  crossorigin="anonymous"></script>
<script defer
  src="https://unpkg.com/lunr@2.3.9/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>

  </head>
  <body class="td-section">
    <header>
      <nav class="td-navbar navbar-dark js-navbar-scroll">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"></span><span class="navbar-brand__name">buzzpirat</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="https://fr33project.org/buzz.php" target="_blank" rel="noopener"><span>Buy</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/"><span>Home</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link active" href="/docs/"><span>Docs</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="https://github.com/therealdreg/buzzpirat/discussions" target="_blank" rel="noopener"><span>Community</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="https://github.com/therealdreg/buzzpirat" target="_blank" rel="noopener"><span>GitHub</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/donations/"><span>Donations</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/acknowledgements/"><span>Acknowledgements</span></a>
      </li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/offline-search-index.75665b7de66d95679b0452dbb41e6162.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            <div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/offline-search-index.75665b7de66d95679b0452dbb41e6162.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type="button" data-bs-toggle="collapse" data-bs-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="td-sidebar-nav collapse" id="td-section-nav">
    <ul class="td-sidebar-nav__section pe-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docs-li">
  <a href="/docs/" title="Documentation" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-docs"><span class="">Docs</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsgetting-started-li">
  <a href="/docs/getting-started/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsgetting-started"><span class="">Getting Started</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-docshow-to-use-li">
  <a href="/docs/how-to-use/" class="align-left ps-0 active td-sidebar-link td-sidebar-link__section" id="m-docshow-to-use"><span class="td-sidebar-nav-active-item">How to use</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsunbrick-li">
  <a href="/docs/unbrick/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsunbrick"><span class="">Unbrick</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbinaryio-li">
  <a href="/docs/binaryio/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsbinaryio"><span class="">Binary I/O</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsfirmware-update-li">
  <a href="/docs/firmware-update/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsfirmware-update"><span class="">Firmware Update</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsavrdude-li">
  <a href="/docs/avrdude/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsavrdude"><span class="">AVRDude</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsflashrom-li">
  <a href="/docs/flashrom/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsflashrom"><span class="">Flashrom</span></a>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            
<div class="td-page-meta ms-2 pb-1 pt-2 mb-0">
<a href="https://github.com/therealdreg/buzzpiratweb/tree/main/content/en/docs/How%20to%20use/_index.md" class="td-page-meta--view" target="_blank" rel="noopener"><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
  <a href="https://github.com/therealdreg/buzzpiratweb/edit/main/content/en/docs/How%20to%20use/_index.md" class="td-page-meta--edit" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
  <a href="https://github.com/therealdreg/buzzpiratweb/new/main/content/en/docs/How%20to%20use?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" class="td-page-meta--child" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
  <a href="https://github.com/therealdreg/buzzpiratweb/issues/new?title=How%20to%20use" class="td-page-meta--issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a>
  <a href="https://github.com/therealdreg/buzzpirat/issues/new" class="td-page-meta--project-issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create project issue</a>
  <a id="print" href="/docs/how-to-use/_print/"><i class="fa-solid fa-print fa-fw"></i> Print entire section</a>

</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#terminal">Terminal</a></li>
    <li><a href="#configuration-commands">Configuration commands</a>
      <ul>
        <li><a href="#-help-menu-with-latest-menu-and-syntax-options">&lsquo;?&rsquo; Help menu with latest menu and syntax options</a></li>
        <li><a href="#i-hardware-firmware-microcontroller-version-information">&lsquo;i&rsquo; Hardware, firmware, microcontroller version information</a></li>
        <li><a href="#m-set-bus-mode-1-wire-spi-i2c-jtag-uart-etc">&rsquo;m&rsquo; Set bus mode (1-Wire, SPI, I2C, JTAG, UART, etc)</a></li>
        <li><a href="#h-command-history">&lsquo;h&rsquo; Command history</a></li>
        <li><a href="#cc-toggle-aux-control-between-aux-and-cstms-pins">&lsquo;c&rsquo;/&lsquo;C&rsquo; Toggle AUX control between AUX and CS/TMS pins</a></li>
        <li><a href="#ll-set-msblsb-first-in-applicable-modes">&rsquo;l&rsquo;/&lsquo;L&rsquo; Set MSB/LSB first in applicable modes</a></li>
        <li><a href="#o-data-display-format-dec-hex-bin-or-raw">&lsquo;o&rsquo; Data display format (DEC, HEX, BIN, or raw)</a></li>
        <li><a href="#b-set-pc-side-serial-port-speed">&lsquo;b&rsquo; Set PC side serial port speed</a></li>
        <li><a href="#-perform-a-self-test">&lsquo;~&rsquo; Perform a self-test</a></li>
        <li><a href="#-reset">&lsquo;#&rsquo; Reset</a></li>
        <li><a href="#-jump-to-bootloader">&lsquo;$&rsquo; Jump to bootloader</a></li>
      </ul>
    </li>
    <li><a href="#utilities-commands">Utilities commands</a>
      <ul>
        <li><a href="#ww-power-supplies-offon">&lsquo;w&rsquo;/&lsquo;W&rsquo; Power supplies (off/ON)</a></li>
        <li><a href="#v-power-supply-voltage-report">&lsquo;v&rsquo; Power supply voltage report</a></li>
        <li><a href="#pp-pull-up-resistors">&lsquo;p&rsquo;/&lsquo;P&rsquo; Pull-up resistors</a></li>
        <li><a href="#f-measure-frequency-on-the-aux-pin">&lsquo;f&rsquo; Measure frequency on the AUX pin</a></li>
        <li><a href="#g-frequency-generatorpwm-on-the-aux-pin">&lsquo;g&rsquo; Frequency generator/PWM on the AUX pin</a></li>
        <li><a href="#s-servo">&lsquo;S&rsquo; Servo</a></li>
        <li><a href="#-convert-to-hexdecbin-number-format">&lsquo;=&rsquo; Convert to HEX/DEC/BIN number format</a></li>
        <li><a href="#-reverse-bits-in-byte">&lsquo;|&rsquo; Reverse bits in byte</a></li>
        <li><a href="#s-basic-script-engine">&rsquo;s&rsquo; BASIC script engine</a></li>
        <li><a href="#dd-measure-from-voltage-probe-oncecontinuous">&rsquo;d&rsquo;/&lsquo;D&rsquo; Measure from voltage probe (once/CONTINUOUS)</a></li>
        <li><a href="#aa-control-axillary-pin-lowhighread">&lsquo;a&rsquo;/&lsquo;A&rsquo;/&rsquo;@&rsquo; Control axillary pin (low/HIGH/read)</a></li>
      </ul>
    </li>
    <li><a href="#macros-user-macros">Macros, user macros</a>
      <ul>
        <li><a href="#0-list-mode-macros">(0) List mode macros</a></li>
        <li><a href="#-run-macro">(#) Run macro</a></li>
        <li><a href="#x--assign-user-macro">&lt;x= &gt; Assign user macro</a></li>
        <li><a href="#0-list-user-macros">&lt;0&gt; List user macros</a></li>
        <li><a href="#-run-user-macro">&lt;#&gt; Run user macro</a></li>
      </ul>
    </li>
    <li><a href="#bitwise-bus-commands">Bitwise bus commands</a>
      <ul>
        <li><a href="#-send-one-clock-tick">&lsquo;^&rsquo; Send one clock tick</a></li>
        <li><a href="#-or--toggle-clock-level-high--and-low-">&lsquo;/&rsquo; or &lsquo;\&rsquo; Toggle clock level high (/) and low (\)</a></li>
        <li><a href="#--or-95-toggle-data-state-high---and-low-95">&lsquo;-&rsquo; or &lsquo;_&rsquo; Toggle data state high (-) and low (&rsquo;_&rsquo;)</a></li>
        <li><a href="#-read-one-bit-with-clock">&lsquo;!&rsquo; Read one bit with clock</a></li>
        <li><a href="#-read-data-pin-state-no-clock">&lsquo;.&rsquo; Read data pin state (no clock)</a></li>
      </ul>
    </li>
    <li><a href="#bus-interaction-commands">Bus interaction commands</a>
      <ul>
        <li><a href="#123-or-91-bus-start-condition">&lsquo;{&rsquo; or &lsquo;[&rsquo; Bus start condition</a></li>
        <li><a href="#-or--bus-stop-condition">&lsquo;]&rsquo; or &lsquo;}&rsquo; Bus stop condition</a></li>
        <li><a href="#r-read-byte">&lsquo;r&rsquo; Read byte</a></li>
        <li><a href="#0b01-write-this-binary-value">0b01 Write this binary value</a></li>
        <li><a href="#0x01-write-this-hex-value">0x01 Write this HEX value</a></li>
        <li><a href="#0-255-write-this-decimal-value">0-255 Write this decimal value</a></li>
        <li><a href="#abc-write-this-ascii-string">&ldquo;abc&rdquo; Write this ASCII string</a></li>
        <li><a href="#--space-value-delimiter">&rsquo; &rsquo; (space), Value delimiter</a></li>
        <li><a href="#-delay-1usms">&lsquo;&amp;&rsquo;/&rsquo;%&rsquo; Delay 1uS/MS</a></li>
        <li><a href="#-repeat-eg-r10">&lsquo;:&rsquo; Repeat (e.g. r:10)</a></li>
        <li><a href="#-partial-16-bit-readwrite-eg-0x553">&lsquo;;&rsquo; Partial (&lt;16 bit) read/write (e.g. 0x55;3)</a></li>
      </ul>
    </li>
    <li><a href="#1-wire">1-Wire</a>
      <ul>
        <li><a href="#syntax">Syntax</a></li>
        <li><a href="#macro">Macro</a></li>
      </ul>
    </li>
    <li><a href="#uart">UART</a>
      <ul>
        <li><a href="#configuration-options">Configuration options</a></li>
        <li><a href="#syntax-1">Syntax</a></li>
        <li><a href="#r-read-a-byte">&lsquo;r&rsquo; read a byte</a></li>
        <li><a href="#parity-and-framing-errors">Parity and framing errors</a></li>
        <li><a href="#buffer-overrun-errors">Buffer overrun errors</a></li>
        <li><a href="#custom-baud-rate">Custom baud rate</a></li>
        <li><a href="#macros">Macros</a></li>
        <li><a href="#midi">MIDI</a></li>
        <li><a href="#connections">Connections</a></li>
      </ul>
    </li>
    <li><a href="#i2c">I2C</a>
      <ul>
        <li><a href="#configuration-options-1">Configuration options</a></li>
        <li><a href="#syntax-2">Syntax</a></li>
        <li><a href="#macro-1">Macro</a></li>
        <li><a href="#acknack-management">ACK/NACK management</a></li>
        <li><a href="#connections-1">Connections</a></li>
      </ul>
    </li>
    <li><a href="#spi">SPI</a>
      <ul>
        <li><a href="#configuration-options-2">Configuration options</a></li>
        <li><a href="#syntax-3">Syntax</a></li>
        <li><a href="#macro-2">Macro</a></li>
        <li><a href="#spi-bus-sniffer">SPI Bus sniffer</a></li>
        <li><a href="#clock-edgeclock-polaritysample-phase-macros">Clock edge/clock polarity/sample phase macros</a></li>
        <li><a href="#connections-2">Connections</a></li>
      </ul>
    </li>
    <li><a href="#raw-2-wire">Raw 2-wire</a>
      <ul>
        <li><a href="#configuration-options-3">Configuration options</a></li>
        <li><a href="#syntax-4">Syntax</a></li>
        <li><a href="#macro-3">Macro</a></li>
        <li><a href="#connections-3">Connections</a></li>
      </ul>
    </li>
    <li><a href="#raw-3-wire">Raw 3-wire</a>
      <ul>
        <li><a href="#configuration-options-4">Configuration options</a></li>
        <li><a href="#syntax-5">Syntax</a></li>
        <li><a href="#connections-4">Connections</a></li>
      </ul>
    </li>
    <li><a href="#hd44780-lcds">HD44780 LCDs</a>
      <ul>
        <li><a href="#syntax-6">Syntax</a></li>
        <li><a href="#macro-4">Macro</a></li>
      </ul>
    </li>
    <li><a href="#pc-keyboard">PC keyboard</a>
      <ul>
        <li><a href="#syntax-7">Syntax</a></li>
        <li><a href="#macro-5">Macro</a></li>
      </ul>
    </li>
    <li><a href="#dio">DIO</a></li>
    <li><a href="#basic-script-reference">BASIC script reference</a>
      <ul>
        <li><a href="#new">NEW</a></li>
        <li><a href="#list">LIST</a></li>
        <li><a href="#run">RUN</a></li>
        <li><a href="#variables">Variables</a></li>
        <li><a href="#let">LET</a></li>
        <li><a href="#if-ifstat-then-truestat-else-falsestat">IF {ifstat} THEN {truestat} ELSE {falsestat}</a></li>
        <li><a href="#goto-line">GOTO {line}</a></li>
        <li><a href="#gosub-line-and-return">GOSUB {line} and RETURN</a></li>
        <li><a href="#rem-text">REM {text}</a></li>
        <li><a href="#print-text">PRINT {text}</a></li>
        <li><a href="#input-questionvar">INPUT {question},{var}</a></li>
        <li><a href="#for-varminvalue-to-maxvalue-stats-next-var">FOR {var}={minvalue} TO {maxvalue} {stats} NEXT {var}</a></li>
        <li><a href="#read-var--data-val1-val2--val1-val2">READ {var} &amp; DATA {val1}, {val2}, .. {val1}, {val2},</a></li>
        <li><a href="#start">START</a></li>
        <li><a href="#stop">STOP</a></li>
        <li><a href="#startr">STARTR</a></li>
        <li><a href="#stopr">STOPR</a></li>
        <li><a href="#send-valvar">SEND {val/var}</a></li>
        <li><a href="#receive">RECEIVE</a></li>
        <li><a href="#clk-val">CLK {val}</a></li>
        <li><a href="#dat-val">DAT {val}</a></li>
        <li><a href="#bitread">BITREAD</a></li>
        <li><a href="#adc">ADC</a></li>
        <li><a href="#aux-val">AUX {val}</a></li>
        <li><a href="#auxpin-val">AUXPIN {val}</a></li>
        <li><a href="#psu-val">PSU {val}</a></li>
        <li><a href="#pullup-val">PULLUP {val}</a></li>
        <li><a href="#delay-var">DELAY {var}</a></li>
        <li><a href="#freq-var--duty-var">FREQ {var} &amp; DUTY {var}</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </div>
    
            
	
          </aside>
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="/docs/">Docs</a></li>
  <li class="breadcrumb-item active" aria-current="page">
    How to use</li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>How to use</h1>
  <div class="lead">How to use your Buzzpirat mod from dangerousprototypes</div>
	<header class="article-meta">
		
  </header>
	<p>Once you have understood the &lsquo;Getting Started&rsquo; section, here you can delve deeper into the use of Buzzpirat.</p>
<p>The Buzzpirat is controlled by text commands entered through the serial terminal. If the terminal is blank, press enter to show the command prompt. Press &lsquo;?&rsquo;, followed by enter, to show the help menu.</p>
<p>Menus configure various Buzzpirat options like pull-up resistors, terminal speed, data display format (DEC, HEX, BIN), etc. Type the menu command, followed by enter, to display the options.
Syntax is used to interact with a device connected over a bus. Commands are mostly single characters, such as &lsquo;r&rsquo; to read a byte. Enter up to 4000 characters of syntax, press enter to execute the sequence.</p>
<p>Most menus have a default option shown in () before the prompt:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>Output type:
</span></span><span style="display:flex;"><span>1. High-Z outputs (H=input, L=GND)
</span></span><span style="display:flex;"><span>2. Normal outputs (H=Vcc, L=GND)
</span></span><span style="display:flex;"><span>(1) &gt; &lt;&lt;&lt; option 1 is the default
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Press enter to select the default option.
</span></span></code></pre></div><nav id="TableOfContents">
  <ul>
    <li><a href="#terminal">Terminal</a></li>
    <li><a href="#configuration-commands">Configuration commands</a>
      <ul>
        <li><a href="#-help-menu-with-latest-menu-and-syntax-options">&lsquo;?&rsquo; Help menu with latest menu and syntax options</a></li>
        <li><a href="#i-hardware-firmware-microcontroller-version-information">&lsquo;i&rsquo; Hardware, firmware, microcontroller version information</a></li>
        <li><a href="#m-set-bus-mode-1-wire-spi-i2c-jtag-uart-etc">&rsquo;m&rsquo; Set bus mode (1-Wire, SPI, I2C, JTAG, UART, etc)</a></li>
        <li><a href="#h-command-history">&lsquo;h&rsquo; Command history</a></li>
        <li><a href="#cc-toggle-aux-control-between-aux-and-cstms-pins">&lsquo;c&rsquo;/&lsquo;C&rsquo; Toggle AUX control between AUX and CS/TMS pins</a></li>
        <li><a href="#ll-set-msblsb-first-in-applicable-modes">&rsquo;l&rsquo;/&lsquo;L&rsquo; Set MSB/LSB first in applicable modes</a></li>
        <li><a href="#o-data-display-format-dec-hex-bin-or-raw">&lsquo;o&rsquo; Data display format (DEC, HEX, BIN, or raw)</a></li>
        <li><a href="#b-set-pc-side-serial-port-speed">&lsquo;b&rsquo; Set PC side serial port speed</a></li>
        <li><a href="#-perform-a-self-test">&lsquo;~&rsquo; Perform a self-test</a></li>
        <li><a href="#-reset">&lsquo;#&rsquo; Reset</a></li>
        <li><a href="#-jump-to-bootloader">&lsquo;$&rsquo; Jump to bootloader</a></li>
      </ul>
    </li>
    <li><a href="#utilities-commands">Utilities commands</a>
      <ul>
        <li><a href="#ww-power-supplies-offon">&lsquo;w&rsquo;/&lsquo;W&rsquo; Power supplies (off/ON)</a></li>
        <li><a href="#v-power-supply-voltage-report">&lsquo;v&rsquo; Power supply voltage report</a></li>
        <li><a href="#pp-pull-up-resistors">&lsquo;p&rsquo;/&lsquo;P&rsquo; Pull-up resistors</a></li>
        <li><a href="#f-measure-frequency-on-the-aux-pin">&lsquo;f&rsquo; Measure frequency on the AUX pin</a></li>
        <li><a href="#g-frequency-generatorpwm-on-the-aux-pin">&lsquo;g&rsquo; Frequency generator/PWM on the AUX pin</a></li>
        <li><a href="#s-servo">&lsquo;S&rsquo; Servo</a></li>
        <li><a href="#-convert-to-hexdecbin-number-format">&lsquo;=&rsquo; Convert to HEX/DEC/BIN number format</a></li>
        <li><a href="#-reverse-bits-in-byte">&lsquo;|&rsquo; Reverse bits in byte</a></li>
        <li><a href="#s-basic-script-engine">&rsquo;s&rsquo; BASIC script engine</a></li>
        <li><a href="#dd-measure-from-voltage-probe-oncecontinuous">&rsquo;d&rsquo;/&lsquo;D&rsquo; Measure from voltage probe (once/CONTINUOUS)</a></li>
        <li><a href="#aa-control-axillary-pin-lowhighread">&lsquo;a&rsquo;/&lsquo;A&rsquo;/&rsquo;@&rsquo; Control axillary pin (low/HIGH/read)</a></li>
      </ul>
    </li>
    <li><a href="#macros-user-macros">Macros, user macros</a>
      <ul>
        <li><a href="#0-list-mode-macros">(0) List mode macros</a></li>
        <li><a href="#-run-macro">(#) Run macro</a></li>
        <li><a href="#x--assign-user-macro">&lt;x= &gt; Assign user macro</a></li>
        <li><a href="#0-list-user-macros">&lt;0&gt; List user macros</a></li>
        <li><a href="#-run-user-macro">&lt;#&gt; Run user macro</a></li>
      </ul>
    </li>
    <li><a href="#bitwise-bus-commands">Bitwise bus commands</a>
      <ul>
        <li><a href="#-send-one-clock-tick">&lsquo;^&rsquo; Send one clock tick</a></li>
        <li><a href="#-or--toggle-clock-level-high--and-low-">&lsquo;/&rsquo; or &lsquo;\&rsquo; Toggle clock level high (/) and low (\)</a></li>
        <li><a href="#--or-95-toggle-data-state-high---and-low-95">&lsquo;-&rsquo; or &lsquo;_&rsquo; Toggle data state high (-) and low (&rsquo;_&rsquo;)</a></li>
        <li><a href="#-read-one-bit-with-clock">&lsquo;!&rsquo; Read one bit with clock</a></li>
        <li><a href="#-read-data-pin-state-no-clock">&lsquo;.&rsquo; Read data pin state (no clock)</a></li>
      </ul>
    </li>
    <li><a href="#bus-interaction-commands">Bus interaction commands</a>
      <ul>
        <li><a href="#123-or-91-bus-start-condition">&lsquo;{&rsquo; or &lsquo;[&rsquo; Bus start condition</a></li>
        <li><a href="#-or--bus-stop-condition">&lsquo;]&rsquo; or &lsquo;}&rsquo; Bus stop condition</a></li>
        <li><a href="#r-read-byte">&lsquo;r&rsquo; Read byte</a></li>
        <li><a href="#0b01-write-this-binary-value">0b01 Write this binary value</a></li>
        <li><a href="#0x01-write-this-hex-value">0x01 Write this HEX value</a></li>
        <li><a href="#0-255-write-this-decimal-value">0-255 Write this decimal value</a></li>
        <li><a href="#abc-write-this-ascii-string">&ldquo;abc&rdquo; Write this ASCII string</a></li>
        <li><a href="#--space-value-delimiter">&rsquo; &rsquo; (space), Value delimiter</a></li>
        <li><a href="#-delay-1usms">&lsquo;&amp;&rsquo;/&rsquo;%&rsquo; Delay 1uS/MS</a></li>
        <li><a href="#-repeat-eg-r10">&lsquo;:&rsquo; Repeat (e.g. r:10)</a></li>
        <li><a href="#-partial-16-bit-readwrite-eg-0x553">&lsquo;;&rsquo; Partial (&lt;16 bit) read/write (e.g. 0x55;3)</a></li>
      </ul>
    </li>
    <li><a href="#1-wire">1-Wire</a>
      <ul>
        <li><a href="#syntax">Syntax</a></li>
        <li><a href="#macro">Macro</a></li>
      </ul>
    </li>
    <li><a href="#uart">UART</a>
      <ul>
        <li><a href="#configuration-options">Configuration options</a></li>
        <li><a href="#syntax-1">Syntax</a></li>
        <li><a href="#r-read-a-byte">&lsquo;r&rsquo; read a byte</a></li>
        <li><a href="#parity-and-framing-errors">Parity and framing errors</a></li>
        <li><a href="#buffer-overrun-errors">Buffer overrun errors</a></li>
        <li><a href="#custom-baud-rate">Custom baud rate</a></li>
        <li><a href="#macros">Macros</a></li>
        <li><a href="#midi">MIDI</a></li>
        <li><a href="#connections">Connections</a></li>
      </ul>
    </li>
    <li><a href="#i2c">I2C</a>
      <ul>
        <li><a href="#configuration-options-1">Configuration options</a></li>
        <li><a href="#syntax-2">Syntax</a></li>
        <li><a href="#macro-1">Macro</a></li>
        <li><a href="#acknack-management">ACK/NACK management</a></li>
        <li><a href="#connections-1">Connections</a></li>
      </ul>
    </li>
    <li><a href="#spi">SPI</a>
      <ul>
        <li><a href="#configuration-options-2">Configuration options</a></li>
        <li><a href="#syntax-3">Syntax</a></li>
        <li><a href="#macro-2">Macro</a></li>
        <li><a href="#spi-bus-sniffer">SPI Bus sniffer</a></li>
        <li><a href="#clock-edgeclock-polaritysample-phase-macros">Clock edge/clock polarity/sample phase macros</a></li>
        <li><a href="#connections-2">Connections</a></li>
      </ul>
    </li>
    <li><a href="#raw-2-wire">Raw 2-wire</a>
      <ul>
        <li><a href="#configuration-options-3">Configuration options</a></li>
        <li><a href="#syntax-4">Syntax</a></li>
        <li><a href="#macro-3">Macro</a></li>
        <li><a href="#connections-3">Connections</a></li>
      </ul>
    </li>
    <li><a href="#raw-3-wire">Raw 3-wire</a>
      <ul>
        <li><a href="#configuration-options-4">Configuration options</a></li>
        <li><a href="#syntax-5">Syntax</a></li>
        <li><a href="#connections-4">Connections</a></li>
      </ul>
    </li>
    <li><a href="#hd44780-lcds">HD44780 LCDs</a>
      <ul>
        <li><a href="#syntax-6">Syntax</a></li>
        <li><a href="#macro-4">Macro</a></li>
      </ul>
    </li>
    <li><a href="#pc-keyboard">PC keyboard</a>
      <ul>
        <li><a href="#syntax-7">Syntax</a></li>
        <li><a href="#macro-5">Macro</a></li>
      </ul>
    </li>
    <li><a href="#dio">DIO</a></li>
    <li><a href="#basic-script-reference">BASIC script reference</a>
      <ul>
        <li><a href="#new">NEW</a></li>
        <li><a href="#list">LIST</a></li>
        <li><a href="#run">RUN</a></li>
        <li><a href="#variables">Variables</a></li>
        <li><a href="#let">LET</a></li>
        <li><a href="#if-ifstat-then-truestat-else-falsestat">IF {ifstat} THEN {truestat} ELSE {falsestat}</a></li>
        <li><a href="#goto-line">GOTO {line}</a></li>
        <li><a href="#gosub-line-and-return">GOSUB {line} and RETURN</a></li>
        <li><a href="#rem-text">REM {text}</a></li>
        <li><a href="#print-text">PRINT {text}</a></li>
        <li><a href="#input-questionvar">INPUT {question},{var}</a></li>
        <li><a href="#for-varminvalue-to-maxvalue-stats-next-var">FOR {var}={minvalue} TO {maxvalue} {stats} NEXT {var}</a></li>
        <li><a href="#read-var--data-val1-val2--val1-val2">READ {var} &amp; DATA {val1}, {val2}, .. {val1}, {val2},</a></li>
        <li><a href="#start">START</a></li>
        <li><a href="#stop">STOP</a></li>
        <li><a href="#startr">STARTR</a></li>
        <li><a href="#stopr">STOPR</a></li>
        <li><a href="#send-valvar">SEND {val/var}</a></li>
        <li><a href="#receive">RECEIVE</a></li>
        <li><a href="#clk-val">CLK {val}</a></li>
        <li><a href="#dat-val">DAT {val}</a></li>
        <li><a href="#bitread">BITREAD</a></li>
        <li><a href="#adc">ADC</a></li>
        <li><a href="#aux-val">AUX {val}</a></li>
        <li><a href="#auxpin-val">AUXPIN {val}</a></li>
        <li><a href="#psu-val">PSU {val}</a></li>
        <li><a href="#pullup-val">PULLUP {val}</a></li>
        <li><a href="#delay-var">DELAY {var}</a></li>
        <li><a href="#freq-var--duty-var">FREQ {var} &amp; DUTY {var}</a></li>
      </ul>
    </li>
  </ul>
</nav>

<h2 id="terminal">Terminal</h2>
<p>Talk to the Buzzpirat from a serial terminal set to 115200bps, 8/N/1</p>
<p>The Buzzpirat understands some VT-100 (ANSI C0) terminal emulation.</p>
<table>
<thead>
<tr>
<th>Keyboard Key</th>
<th>Ctrl-Key</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>[left arrow]</td>
<td>^B</td>
<td>Moves the cursor left one character</td>
</tr>
<tr>
<td>[right arrow]</td>
<td>^F</td>
<td>Moves the cursor right one character</td>
</tr>
<tr>
<td>[up arrow]</td>
<td>^P</td>
<td>Copies the previous command in the command history buffer to the command line</td>
</tr>
<tr>
<td>[down arrow]</td>
<td>^N</td>
<td>Copies the next command in the command history buffer to the command line</td>
</tr>
<tr>
<td></td>
<td>^A</td>
<td>Moves the cursor to the beginning of the line</td>
</tr>
<tr>
<td></td>
<td>^E</td>
<td>Moves the cursor to the end of the line</td>
</tr>
<tr>
<td>[backspace]</td>
<td>^H</td>
<td>Erases the character to the left of the cursor and moves the cursor left one character</td>
</tr>
<tr>
<td>[delete]</td>
<td>^D</td>
<td>Erases the character under (or to the right of) the cursor and moves the cursor left one character</td>
</tr>
</tbody>
</table>
<h2 id="configuration-commands">Configuration commands</h2>
<h3 id="-help-menu-with-latest-menu-and-syntax-options">&lsquo;?&rsquo; Help menu with latest menu and syntax options</h3>
<p>Print a help screen with all available menu and syntax options in the current firmware and hardware.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>HiZ&gt;?
</span></span><span style="display:flex;"><span> General                                        Protocol interaction
</span></span><span style="display:flex;"><span> ---------------------------------------------------------------------------
</span></span><span style="display:flex;"><span> ?      This help                       (0)     List current macros
</span></span><span style="display:flex;"><span> =X/|X  Converts X/reverse X            (x)     Macro x
</span></span><span style="display:flex;"><span> ~      Selftest                        [       Start
</span></span><span style="display:flex;"><span> #      Reset the BP                    ]       Stop
</span></span><span style="display:flex;"><span> $      Jump to bootloader              {       Start with read
</span></span><span style="display:flex;"><span> &amp;/%    Delay 1 us/ms                   }       Stop
</span></span><span style="display:flex;"><span> a/A/@  AUXPIN (low/HI/READ)            &#34;abc&#34;   Send string
</span></span><span style="display:flex;"><span> b      Set baudrate                    123
</span></span><span style="display:flex;"><span> c/C    AUX assignment (aux/CS)         0x123
</span></span><span style="display:flex;"><span> d/D    Measure ADC (once/CONT.)        0b110   Send value
</span></span><span style="display:flex;"><span> f      Measure frequency               r       Read
</span></span><span style="display:flex;"><span> g/S    Generate PWM/Servo              /       CLK hi
</span></span><span style="display:flex;"><span> h      Commandhistory                  \       CLK lo
</span></span><span style="display:flex;"><span> i      Versioninfo/statusinfo          ^       CLK tick
</span></span><span style="display:flex;"><span> l/L    Bitorder (msb/LSB)              -       DAT hi
</span></span><span style="display:flex;"><span> m      Change mode                     _       DAT lo
</span></span><span style="display:flex;"><span> o      Set output type                 .       DAT read
</span></span><span style="display:flex;"><span> p/P    Pullup resistors (off/ON)       !       Bit read
</span></span><span style="display:flex;"><span> s      Script engine                   :       Repeat e.g. r:10
</span></span><span style="display:flex;"><span> v      Show volts/states               .       Bits to read/write e.g. 0x55.2
</span></span><span style="display:flex;"><span> w/W    PSU (off/ON)            &lt;x&gt;/&lt;x= &gt;/&lt;0&gt;   Usermacro x/assign x/list all
</span></span><span style="display:flex;"><span> e/E    TP0 (input-low+READ/output-low) (TP0 is connected to VPU)
</span></span><span style="display:flex;"><span>HiZ&gt;
</span></span></code></pre></div><h3 id="i-hardware-firmware-microcontroller-version-information">&lsquo;i&rsquo; Hardware, firmware, microcontroller version information</h3>
<p>The information menu displays the hardware, firmware, and microcontroller version.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>HiZ&gt; i
</span></span><span style="display:flex;"><span>Buzzpirat v3.5 &lt;&lt;&lt;hardware version
</span></span><span style="display:flex;"><span>Community Firmware v7.1 - buzzpirat.com by Dreg LASTDEV [HiZ 1-WIRE UART I2C SPI 2WIRE 3WIRE KEYB LCD PIC DIO] Bootloader v4.5 &lt;&lt;&lt;firmware and bootloader version, project webpage
</span></span><span style="display:flex;"><span>DEVID:0x0447 REVID:0x3046 (24FJ64GA00 2 B8) &lt;&lt;&lt;PIC device ID and revision
</span></span><span style="display:flex;"><span>http://dangerousprototypes.com &lt;&lt;&lt;dangerousprototypes webpage
</span></span></code></pre></div><p>HiZ&gt;</p>
<p>If a bus mode is configured additional information about the configuration options is printed.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>*----------*
</span></span><span style="display:flex;"><span>POWER SUPPLIES OFF
</span></span><span style="display:flex;"><span>Voltage monitors: 5V: 0.0 | 3.3V: 0.0 | VPULLUP: 0.0 |
</span></span><span style="display:flex;"><span>a/A/@ controls AUX pin
</span></span><span style="display:flex;"><span>Normal outputs (H=V+, L=GND)
</span></span><span style="display:flex;"><span>Pull-up resistors ON
</span></span><span style="display:flex;"><span>MSB set: MOST sig bit first
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>* ----------*
</span></span><span style="display:flex;"><span>RAW2WIRE&gt;
</span></span></code></pre></div><h3 id="m-set-bus-mode-1-wire-spi-i2c-jtag-uart-etc">&rsquo;m&rsquo; Set bus mode (1-Wire, SPI, I2C, JTAG, UART, etc)</h3>
<p>Select a bus mode. The command resets the Buzzpirat and immediately disables all pins, pull-up resistors, and power supplies.</p>
<p>The default mode is HiZ, a safe mode with all pins set to high-impedance and all peripherals disabled.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>HiZ&gt;m
</span></span><span style="display:flex;"><span>1. HiZ
</span></span><span style="display:flex;"><span>2. 1-WIRE
</span></span><span style="display:flex;"><span>3. UART
</span></span><span style="display:flex;"><span>4. I2C
</span></span><span style="display:flex;"><span>5. SPI
</span></span><span style="display:flex;"><span>6. 2WIRE
</span></span><span style="display:flex;"><span>7. 3WIRE
</span></span><span style="display:flex;"><span>8. KEYB
</span></span><span style="display:flex;"><span>9. LCD
</span></span><span style="display:flex;"><span>10. PIC
</span></span><span style="display:flex;"><span>11. DIO
</span></span><span style="display:flex;"><span>x. exit(without change)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(1)&gt;
</span></span></code></pre></div><h3 id="h-command-history">&lsquo;h&rsquo; Command history</h3>
<p>The previous 10 commands can be replayed from the command history menu.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>SPI&gt; h
</span></span><span style="display:flex;"><span>1. h
</span></span><span style="display:flex;"><span>2. [10 r:3]
</span></span><span style="display:flex;"><span>3. m
</span></span><span style="display:flex;"><span>4. i
</span></span><span style="display:flex;"><span>x. exit
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(0)&gt; 2 &lt;&lt;&lt;replay #2
</span></span><span style="display:flex;"><span>CS ENABLED
</span></span><span style="display:flex;"><span>WRITE: 0x0A
</span></span><span style="display:flex;"><span>READ: 0x00 0x00 0x00
</span></span><span style="display:flex;"><span>CS DISABLED
</span></span><span style="display:flex;"><span>SPI&gt;
</span></span></code></pre></div><h3 id="cc-toggle-aux-control-between-aux-and-cstms-pins">&lsquo;c&rsquo;/&lsquo;C&rsquo; Toggle AUX control between AUX and CS/TMS pins</h3>
<p>Sometimes it&rsquo;s useful to control the CS pin from the user terminal. The c/C configures the a/A/@ commands to control the AUX or CS pins.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>3WIRE&gt; c
</span></span><span style="display:flex;"><span>a/A/@ controls AUX pin
</span></span><span style="display:flex;"><span>3WIRE&gt; C
</span></span><span style="display:flex;"><span>a/A/@ controls CS/TMS pin
</span></span><span style="display:flex;"><span>3WIRE&gt;
</span></span></code></pre></div><h3 id="ll-set-msblsb-first-in-applicable-modes">&rsquo;l&rsquo;/&lsquo;L&rsquo; Set MSB/LSB first in applicable modes</h3>
<p>The l/L command determines the bit order for reading and writing bytes in some bus modes. The bitorder command is available in all modes</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>3WIRE&gt; l
</span></span><span style="display:flex;"><span>MSB set: MOST sig bit first
</span></span><span style="display:flex;"><span>3WIRE&gt; L
</span></span><span style="display:flex;"><span>MSB set: LEAST sig bit first
</span></span><span style="display:flex;"><span>3WIRE&gt;
</span></span></code></pre></div><h3 id="o-data-display-format-dec-hex-bin-or-raw">&lsquo;o&rsquo; Data display format (DEC, HEX, BIN, or raw)</h3>
<p>The Buzzpirat can display values as hexadecimal, decimal, binary, and a raw ASCII byte. Change the setting in the data display format menu (o). The default display format is HEX.</p>
<p>The RAW display mode sends values to the terminal as raw byte values without any text conversion. This is useful for ASCII serial interfaces. It can also be used to speed up the display of bus sniffers and other high-speed functions where converting raw bytes to text takes too much time. Adjust the display format in your serial terminal to see the raw values as HEX/DEC/BIN.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>HiZ&gt; o
</span></span><span style="display:flex;"><span>1. HEX
</span></span><span style="display:flex;"><span>2. DEC
</span></span><span style="display:flex;"><span>3. BIN
</span></span><span style="display:flex;"><span>4. RAW
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(1)&gt;
</span></span><span style="display:flex;"><span>Display format set
</span></span><span style="display:flex;"><span>HiZ&gt;
</span></span></code></pre></div><h3 id="b-set-pc-side-serial-port-speed">&lsquo;b&rsquo; Set PC side serial port speed</h3>
<p>Adjust the speed of the serial port facing the computer (and USB-&gt;serial converter chip).</p>
<p>After choosing a speed you must adjust the serial terminal and press space to continue. The Buzzpirat will pause until the space key is pressed to verify that the terminal speed is correct.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>(9)&gt; 10
</span></span><span style="display:flex;"><span>Enter raw value for BRG
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(34)&gt; 34
</span></span><span style="display:flex;"><span>Adjust your terminal
</span></span><span style="display:flex;"><span>Space to continue
</span></span><span style="display:flex;"><span>HiZ&gt;
</span></span></code></pre></div><p>There is an option to set a custom baud rate with a raw BRG value. The value can be calculated according to the datasheet or with a utility (key constants: PIC24, 32MHz/16MIPS, BRGH=1): <a href="https://github.com/therealdreg/buzzpirat/tree/main/bin/picbaud/">https://github.com/therealdreg/buzzpirat/tree/main/bin/picbaud/</a></p>
<p>230400 baud is &lsquo;16&rsquo; (2.2% error)
460800 baud is &lsquo;8&rsquo; (3.3% error)
921600 baud is &lsquo;3&rsquo; (8.51% error)
One thing to note is that on some early PIC revisions (A3) the UART is weird and the exact values won&rsquo;t work. On these chips try a value +/-1.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>HiZ&gt; b
</span></span><span style="display:flex;"><span>Set serial port speed: (bps)
</span></span><span style="display:flex;"><span>1. 300
</span></span><span style="display:flex;"><span>2. 1200
</span></span><span style="display:flex;"><span>3. 2400
</span></span><span style="display:flex;"><span>4. 4800
</span></span><span style="display:flex;"><span>5. 9600
</span></span><span style="display:flex;"><span>6. 19200
</span></span><span style="display:flex;"><span>7. 38400
</span></span><span style="display:flex;"><span>8. 57600
</span></span><span style="display:flex;"><span>9. 115200
</span></span><span style="display:flex;"><span>10. BRG raw value
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(9)&gt;
</span></span><span style="display:flex;"><span>Adjust your terminal
</span></span><span style="display:flex;"><span>Space to continue
</span></span><span style="display:flex;"><span>HiZ&gt;
</span></span></code></pre></div><h3 id="-perform-a-self-test">&lsquo;~&rsquo; Perform a self-test</h3>
<p>Perform a hardware self-test. Requires jumpers between +5 and Vpu, +3.3 and ADC.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>HiZ&gt; ~
</span></span><span style="display:flex;"><span>Disconnect any devices
</span></span><span style="display:flex;"><span>Connect (Vpu to +5V) and (ADC to +3.3V)
</span></span><span style="display:flex;"><span>Space to continue
</span></span></code></pre></div><h3 id="-reset">&lsquo;#&rsquo; Reset</h3>
<p>Reset the Buzzpirat.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>HiZ&gt;#
</span></span><span style="display:flex;"><span>RESET
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Buzzpirat v3.5
</span></span><span style="display:flex;"><span>Community Firmware v7.1 - buzzpirat.com by Dreg LASTDEV [HiZ 1-WIRE UART I2C SPI 2WIRE 3WIRE KEYB LCD PIC DIO] Bootloader v4.5
</span></span><span style="display:flex;"><span>DEVID:0x0447 REVID:0x3046 (24FJ64GA00 2 B8)
</span></span><span style="display:flex;"><span>http://dangerousprototypes.com
</span></span><span style="display:flex;"><span>HiZ&gt;
</span></span></code></pre></div><h3 id="-jump-to-bootloader">&lsquo;$&rsquo; Jump to bootloader</h3>
<p>Bootloader v4.5 will respond with a version string if a key is pressed while it&rsquo;s active.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>HiZ&gt; $
</span></span><span style="display:flex;"><span>Are you sure? y
</span></span><span style="display:flex;"><span>BOOTLOADER
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Enter the bootloader for a firmware update without connecting the PGC and PGD pins. Remember to disconnect your terminal program before the upgrade.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>BL4+BL4+
</span></span></code></pre></div><h2 id="utilities-commands">Utilities commands</h2>
<h3 id="ww-power-supplies-offon">&lsquo;w&rsquo;/&lsquo;W&rsquo; Power supplies (off/ON)</h3>
<p>Toggle the switchable 1.8volt, 2.5volt, 3.3volt and 5.0volt power supplies with the w/W command. Capital &lsquo;W&rsquo; enables the supplies, lowercase &lsquo;w&rsquo; disables them. The power supplies on the Buzzpirat can supply up to 300mA</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>1-WIRE&gt; w
</span></span><span style="display:flex;"><span>POWER SUPPLIES OFF
</span></span><span style="display:flex;"><span>1-WIRE&gt; W
</span></span><span style="display:flex;"><span>POWER SUPPLIES ON
</span></span><span style="display:flex;"><span>1-WIRE&gt;
</span></span></code></pre></div><h3 id="v-power-supply-voltage-report">&lsquo;v&rsquo; Power supply voltage report</h3>
<p>The voltage report shows the current state of all the Buzzpirat pins and peripherals.</p>
<p>The first line is the pin number, according to the silk screen on the v3 PCB, and the wire color. T</p>
<p>The second line is the pin function in the current bus mode. The power supplies (1.8v, 2.5v, 3.3v, 5.0v), ADC, Vpu, and AUX pins are available in all modes. The other four pins will differ depending on the mode. In 1-Wire mode only one pin is used, one wire data (OWD).</p>
<p>The third line shows the current direction of each pin. I is an input pin, O is an output pin, P is a power supply.</p>
<p>The fourth line shows the current state of each pin. A voltage measurement is displayed for analog pins. The current pin reading, H high and L low, is printed for each digital pins.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>I2C&gt;v
</span></span><span style="display:flex;"><span>Pinstates:
</span></span><span style="display:flex;"><span>1.(BR)  2.(RD)  3.(OR)  4.(YW)  5.(GN)  6.(BL)  7.(PU)  8.(GR)  9.(WT)  0.(Blk)
</span></span><span style="display:flex;"><span>GND     3.3V    5.0V    ADC     VPU     AUX     SCL     SDA     -       -
</span></span><span style="display:flex;"><span>P       P       P       I       I       I       I       I       I       I
</span></span><span style="display:flex;"><span>GND     3.31V   4.87V   0.00V   2.44V   L       H       H       H       H
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>1.(BR)  2.(RD)  3.(OR)
</span></span><span style="display:flex;"><span>2.5V    1.8V    TP0
</span></span><span style="display:flex;"><span>P       P       I
</span></span><span style="display:flex;"><span>2.50V   1.79V   H
</span></span><span style="display:flex;"><span>I2C&gt;
</span></span></code></pre></div><h3 id="pp-pull-up-resistors">&lsquo;p&rsquo;/&lsquo;P&rsquo; Pull-up resistors</h3>
<p>p and P toggle the pull-up resistors off and on.</p>
<p>The on-board pull-up resistors must be powered through the Vpullup pin of the IO header. A warning is displayed if there&rsquo;s no voltage on the Vpullup pin. Check the voltage report (&lsquo;v&rsquo;) and verify that Vpu is attached to a power supply. See the practical guide to Buzzpirat pull-up resistors for a simple introduction.</p>
<p>Pull-up resistors are generally used with open collector/open drain bus types. A warning is displayed when the pull-ups are enabled if the Buzzpirat is configured for normal pin output.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>I2C&gt;P
</span></span><span style="display:flex;"><span>Pull-up resistors ON
</span></span><span style="display:flex;"><span>I2C&gt;
</span></span></code></pre></div><h3 id="f-measure-frequency-on-the-aux-pin">&lsquo;f&rsquo; Measure frequency on the AUX pin</h3>
<p>Measures frequency from 0Hz to 40MHz on the AUX pin, the method is an actual 1 second tick count. If the frequency is lower than a few MHz, the Buzzpirat does an &lsquo;autorange&rsquo; and measures the frequency again for an additional second.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>2WIRE&gt; f
</span></span><span style="display:flex;"><span>Frequency on AUX pin: autorange 50,283 Hz
</span></span><span style="display:flex;"><span>2WIRE&gt;
</span></span></code></pre></div><h3 id="g-frequency-generatorpwm-on-the-aux-pin">&lsquo;g&rsquo; Frequency generator/PWM on the AUX pin</h3>
<p>Enable the frequency generator with g, then set frequency and duty cycle. Frequencies from 1kHz to 4MHz are possible. Use g again to disable the PWM.</p>
<p>Note that the resolution at 4MHz is only 1 bit. Anything other than 50% duty cycle will be 100% off or 100% on.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>2WIRE&gt; g
</span></span><span style="display:flex;"><span>1KHz-4,000KHz PWM/frequency generator
</span></span><span style="display:flex;"><span>Frequency in KHz
</span></span><span style="display:flex;"><span>(50)&gt; 2000
</span></span><span style="display:flex;"><span>Duty cycle in %
</span></span><span style="display:flex;"><span>(50)&gt;
</span></span><span style="display:flex;"><span>PWM active
</span></span><span style="display:flex;"><span>2WIRE&gt; g
</span></span><span style="display:flex;"><span>PWM disabled
</span></span><span style="display:flex;"><span>2WIRE&gt;
</span></span></code></pre></div><h3 id="s-servo">&lsquo;S&rsquo; Servo</h3>
<p>S positions the servo arm to the desired angle, 0-180 degrees. The servo value can be updated as needed, press enter or x to exit. Use &lsquo;S&rsquo; or &lsquo;g&rsquo; again to disable the servo.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>1-WIRE&gt;S
</span></span><span style="display:flex;"><span>Position in degrees
</span></span><span style="display:flex;"><span>(90)&gt;20
</span></span><span style="display:flex;"><span>Servo active
</span></span><span style="display:flex;"><span>(x)&gt;100
</span></span><span style="display:flex;"><span>Servo active
</span></span><span style="display:flex;"><span>(x)&gt;30
</span></span><span style="display:flex;"><span>Servo active
</span></span><span style="display:flex;"><span>(x)&gt;
</span></span><span style="display:flex;"><span>1-WIRE&gt;S
</span></span><span style="display:flex;"><span>PWM disabled
</span></span><span style="display:flex;"><span>1-WIRE&gt;S 90 %:5000 S 180
</span></span><span style="display:flex;"><span>Servo active
</span></span><span style="display:flex;"><span>DELAY 5000ms
</span></span><span style="display:flex;"><span>Servo active
</span></span><span style="display:flex;"><span>1-WIRE&gt;
</span></span></code></pre></div>

<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Warning</h4>

    Some servos draw more current than the Buzzpirat can supply!! Use an external power supply instead.

</div>

<h3 id="-convert-to-hexdecbin-number-format">&lsquo;=&rsquo; Convert to HEX/DEC/BIN number format</h3>
<p>Base conversion command, available in all modes. Press &lsquo;=&rsquo; and enter any byte value to see the HEX/DEC/BIN equivalent. Firmware v2.1+</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>2WIRE&gt; =0b110
</span></span><span style="display:flex;"><span>0x06 = 6 = 0b00000110
</span></span><span style="display:flex;"><span>2WIRE&gt; =0xa
</span></span><span style="display:flex;"><span>0x0A = 10 = 0b00001010
</span></span><span style="display:flex;"><span>2WIRE&gt; =12
</span></span><span style="display:flex;"><span>0x0C = 12 = 0b00001100
</span></span><span style="display:flex;"><span>2WIRE&gt;
</span></span></code></pre></div><h3 id="-reverse-bits-in-byte">&lsquo;|&rsquo; Reverse bits in byte</h3>
<p>Reverse bit order in byte X. Displays the HEX/DEC/BIN value of the reversed byte.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>I2C&gt; |0b10101010
</span></span><span style="display:flex;"><span>0x55 = 85 = 0b01010101
</span></span><span style="display:flex;"><span>I2C&gt; |0b10000000
</span></span><span style="display:flex;"><span>0x01 = 1 = 0b00000001
</span></span><span style="display:flex;"><span>I2C&gt; |1
</span></span><span style="display:flex;"><span>0x80 = 128 = 0b10000000
</span></span><span style="display:flex;"><span>I2C&gt;
</span></span></code></pre></div><h3 id="s-basic-script-engine">&rsquo;s&rsquo; BASIC script engine</h3>
<p>Simple BASIC scripts can automate repetitive and tedious tasks.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>2WIRE&gt; s
</span></span><span style="display:flex;"><span>2WIRE(BASIC)&gt; list
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>65535 bytes.
</span></span><span style="display:flex;"><span>Ready.
</span></span><span style="display:flex;"><span>2WIRE(BASIC)&gt;
</span></span></code></pre></div><h3 id="dd-measure-from-voltage-probe-oncecontinuous">&rsquo;d&rsquo;/&lsquo;D&rsquo; Measure from voltage probe (once/CONTINUOUS)</h3>
<p>A lowercase d takes a measurement from the voltage measurement probe (ADC pin on the IO header).</p>
<p>A capital D takes continuous measurements from the voltage probe, press any key to exit.</p>
<p>The Buzzpirat voltage probe can measure up to 6.0volts (max 6.6volts, but with some margin for error).</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>HiZ&gt; d
</span></span><span style="display:flex;"><span>VOLTAGE PROBE: 3.31V
</span></span><span style="display:flex;"><span>HiZ&gt; D
</span></span><span style="display:flex;"><span>VOLTMETER MODE
</span></span><span style="display:flex;"><span>Any key to exit
</span></span><span style="display:flex;"><span>VOLTAGE PROBE: 3.30V
</span></span></code></pre></div><h3 id="aa-control-axillary-pin-lowhighread">&lsquo;a&rsquo;/&lsquo;A&rsquo;/&rsquo;@&rsquo; Control axillary pin (low/HIGH/read)</h3>
<p>The axillary pin is a general purpose digital pin that can be controlled from the Buzzpirat terminal. Capital A makes it a 3.3volt output (25mA max). Lowercase a makes it sink to ground (25mA max). @ makes in an input and reads the current state (5volt maximum input).</p>
<p>a/A/@ can also be used to control the CS pin using the &lsquo;c&rsquo;/&lsquo;C&rsquo; commands.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>UART&gt; A
</span></span><span style="display:flex;"><span>AUX HIGH
</span></span><span style="display:flex;"><span>UART&gt; a
</span></span><span style="display:flex;"><span>AUX LOW
</span></span><span style="display:flex;"><span>UART&gt; @
</span></span><span style="display:flex;"><span>AUX INPUT/HI-Z, READ: 0
</span></span><span style="display:flex;"><span>UART&gt;
</span></span></code></pre></div><h2 id="macros-user-macros">Macros, user macros</h2>
<p>Macros perform complex actions, like scanning for I2C addresses, interrogating a smart card, or probing a JTAG chain. Macros are numbers entered inside (). Macro (0) always displays a list of macros available in the current bus mode.</p>
<h3 id="0-list-mode-macros">(0) List mode macros</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>I2C&gt; (0)
</span></span><span style="display:flex;"><span>0.Macro menu
</span></span><span style="display:flex;"><span>1.7bit address search
</span></span><span style="display:flex;"><span>2.I2C sniffer
</span></span><span style="display:flex;"><span>I2C&gt;
</span></span></code></pre></div><p>Macro (0) always displays a list of macros available in the current bus mode.</p>
<h3 id="-run-macro">(#) Run macro</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>I2C&gt;(1)&lt;&lt;&lt;I2C search macro
</span></span><span style="display:flex;"><span>Searching 7bit I2C address space.
</span></span><span style="display:flex;"><span>Found devices at:
</span></span><span style="display:flex;"><span>0xA0(0x50 W) 0xA1(0x50 R)
</span></span><span style="display:flex;"><span>I2C&gt;
</span></span></code></pre></div><p>Execute a macro by typing the macro number between ().</p>
<h3 id="x--assign-user-macro">&lt;x= &gt; Assign user macro</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>I2C&gt; &lt;1=[0xa1 r:8]&gt;
</span></span><span style="display:flex;"><span>I2C&gt;
</span></span></code></pre></div><p>5 user macros can be stored to automate common commands. Each position can store 32 chars (including space).</p>
<h3 id="0-list-user-macros">&lt;0&gt; List user macros</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>I2C&gt; &lt;0&gt;
</span></span><span style="display:flex;"><span>1. &lt;[0xa1 r:8]&gt;
</span></span><span style="display:flex;"><span>2. &lt;&gt;
</span></span><span style="display:flex;"><span>3. &lt;&gt;
</span></span><span style="display:flex;"><span>4. &lt;&gt;
</span></span><span style="display:flex;"><span>5. &lt;&gt;
</span></span><span style="display:flex;"><span>I2C&gt;
</span></span></code></pre></div><p>User macro &lt;0&gt; lists the currently stored use macros.</p>
<h3 id="-run-user-macro">&lt;#&gt; Run user macro</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>I2C&gt; &lt;1&gt;
</span></span><span style="display:flex;"><span>I2C&gt; [0xa1 r:8]
</span></span></code></pre></div><p>Enter the macro number to recall the command. Press enter to execute.</p>
<h2 id="bitwise-bus-commands">Bitwise bus commands</h2>
<p>Bitwise commands are only available in certain bus modes.</p>
<h3 id="-send-one-clock-tick">&lsquo;^&rsquo; Send one clock tick</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>2WIRE&gt; ^
</span></span><span style="display:flex;"><span>CLOCK TICK
</span></span><span style="display:flex;"><span>2WIRE&gt;
</span></span></code></pre></div><p>Send one clock tick. ^:1…255 for multiple clock ticks.</p>
<h3 id="-or--toggle-clock-level-high--and-low-">&lsquo;/&rsquo; or &lsquo;\&rsquo; Toggle clock level high (/) and low (\)</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>2WIRE&gt; /\
</span></span><span style="display:flex;"><span>CLOCK, 1
</span></span><span style="display:flex;"><span>CLOCK, 0
</span></span><span style="display:flex;"><span>2WIRE&gt;
</span></span></code></pre></div><p>Set the clock signal high or low. Includes clock delay.</p>
<h3 id="--or-95-toggle-data-state-high---and-low-95">&lsquo;-&rsquo; or &lsquo;_&rsquo; Toggle data state high (-) and low (&rsquo;_&rsquo;)</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>2WIRE&gt; -_
</span></span><span style="display:flex;"><span>DATA OUTPUT, 1
</span></span><span style="display:flex;"><span>DATA OUTPUT, 0
</span></span><span style="display:flex;"><span>2WIRE&gt;
</span></span></code></pre></div><p>Set the data signal high or low. Includes data setup delay</p>
<h3 id="-read-one-bit-with-clock">&lsquo;!&rsquo; Read one bit with clock</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>2WIRE&gt; !
</span></span><span style="display:flex;"><span>READ BIT:
</span></span><span style="display:flex;"><span>0 *pin is now HiZ
</span></span><span style="display:flex;"><span>2WIRE&gt;
</span></span></code></pre></div><p>Send one clock tick and read one bit from the bus.</p>
<p>On a bus with a bi-directional data line (raw2wire, 1-Wire), the data pin is left as a high-impedance input after this command.</p>
<h3 id="-read-data-pin-state-no-clock">&lsquo;.&rsquo; Read data pin state (no clock)</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>2WIRE&gt; .
</span></span><span style="display:flex;"><span>0 *pin is now HiZ
</span></span><span style="display:flex;"><span>2WIRE&gt;
</span></span></code></pre></div><p>Make the data pin an input and read, but do not send a clock. This can be used as /.\ to achieve the same thing as the ! command.</p>
<p>On a bus with a bi-directional data line (raw2wire, 1-wire), the data pin is left as a high-impedance input after this command.</p>
<h2 id="bus-interaction-commands">Bus interaction commands</h2>
<p>These commands actually manipulate the bus and interacts with chips. These commands have the same general function in each bus mode, such as &lsquo;r&rsquo; to read a byte of data. See the individual bus mode guides for each protocol.</p>
<h3 id="123-or-91-bus-start-condition">&lsquo;{&rsquo; or &lsquo;[&rsquo; Bus start condition</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>I2C&gt; [
</span></span><span style="display:flex;"><span>I2C START BIT
</span></span><span style="display:flex;"><span>I2C&gt;
</span></span></code></pre></div><p>This command generally starts bus activity. In various modes it starts (I2C), selects (SPI), resets (1-wire), or opens (UART).</p>
<h3 id="-or--bus-stop-condition">&lsquo;]&rsquo; or &lsquo;}&rsquo; Bus stop condition</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>SPI&gt; ]
</span></span><span style="display:flex;"><span>CS DISABLED
</span></span><span style="display:flex;"><span>SPI&gt;
</span></span></code></pre></div><p>This command generally stops bus activity. In various modes it stops (I2C), deselects (SPI), or closes (UART).</p>
<h3 id="r-read-byte">&lsquo;r&rsquo; Read byte</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>I2C&gt; r
</span></span><span style="display:flex;"><span>READ: 0x00
</span></span><span style="display:flex;"><span>I2C&gt; r:3
</span></span><span style="display:flex;"><span>READ: ACK 0x00 ACK 0x00 ACK 0x00
</span></span><span style="display:flex;"><span>I2C&gt;
</span></span></code></pre></div><p>r reads a byte from the bus. Use with the repeat command (r:1…255) for bulk reads.</p>
<h3 id="0b01-write-this-binary-value">0b01 Write this binary value</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>I2C&gt; 0b1001
</span></span><span style="display:flex;"><span>WRITE: 0x09 ACK
</span></span><span style="display:flex;"><span>I2C&gt; 0b1001:2
</span></span><span style="display:flex;"><span>WRITE: 0x09 ACK 0x09 ACK
</span></span><span style="display:flex;"><span>I2C&gt;
</span></span></code></pre></div><p>Enter a binary value to write it to the bus.</p>
<p>Binary values are commonly used in electronics because the 1&rsquo;s and 0&rsquo;s correspond to register &lsquo;switches&rsquo; that control various aspects of a device. Enter a binary number as 0b and then the bits. Padding 0&rsquo;s are not required, 0b00000001=0b1. Can be used with the repeat command.</p>
<h3 id="0x01-write-this-hex-value">0x01 Write this HEX value</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>SPI&gt; 0x15
</span></span><span style="display:flex;"><span>WRITE: 0x15
</span></span><span style="display:flex;"><span>SPI&gt; 0xfa:5
</span></span><span style="display:flex;"><span>WRITE: 0xFA 0xFA 0xFA 0xFA 0xFA
</span></span><span style="display:flex;"><span>SPI&gt;
</span></span></code></pre></div><p>Enter a HEX value to write it to the bus.</p>
<p>Hexadecimal values are base 16 numbers that use a-f for the numbers 10-15, this format is very common in computers and electronics. Enter HEX values as shown above, precede the value with 0x or 0h. Single digit numbers don&rsquo;t need 0 padding, 0x01 and 0x1 are interpreted the same. A-F can be lower-case or capital letters.</p>
<h3 id="0-255-write-this-decimal-value">0-255 Write this decimal value</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>SPI&gt; 18
</span></span><span style="display:flex;"><span>WRITE: 0x12
</span></span><span style="display:flex;"><span>SPI&gt; 13:5
</span></span><span style="display:flex;"><span>WRITE: 0x0D 0x0D 0x0D 0x0D 0x0D
</span></span><span style="display:flex;"><span>SPI&gt;
</span></span></code></pre></div><p>Any number not preceded by 0x, 0h, or 0b is interpreted as a decimal value and sent to the bus.</p>
<p>Decimal values are common base 10 numbers. Just enter the value, no special designator is required.</p>
<h3 id="abc-write-this-ascii-string">&ldquo;abc&rdquo; Write this ASCII string</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>SPI&gt; &#34;abcd&#34;
</span></span><span style="display:flex;"><span>WRITE: &#34;abcd&#34;
</span></span><span style="display:flex;"><span>SPI&gt;
</span></span></code></pre></div><p>The ASCII values enclosed in &quot;&quot; are sent to the bus.</p>
<h3 id="--space-value-delimiter">&rsquo; &rsquo; (space), Value delimiter</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>SPI&gt; [1 2,3rr]
</span></span><span style="display:flex;"><span>CS ENABLED
</span></span><span style="display:flex;"><span>WRITE: 0x01
</span></span><span style="display:flex;"><span>WRITE: 0x02
</span></span><span style="display:flex;"><span>WRITE: 0x03
</span></span><span style="display:flex;"><span>READ: 0x0A
</span></span><span style="display:flex;"><span>READ: 0x0A
</span></span><span style="display:flex;"><span>CS DISABLED
</span></span><span style="display:flex;"><span>SPI&gt;
</span></span></code></pre></div><p>Use a coma or space to separate numbers. Any combination is fine, no delimiter is required between non-number values.</p>
<h3 id="-delay-1usms">&lsquo;&amp;&rsquo;/&rsquo;%&rsquo; Delay 1uS/MS</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>SPI&gt; &amp;
</span></span><span style="display:flex;"><span>DELAY 1us
</span></span><span style="display:flex;"><span>SPI&gt; &amp;:10
</span></span><span style="display:flex;"><span>DELAY 10us
</span></span><span style="display:flex;"><span>SPI&gt; %
</span></span><span style="display:flex;"><span>DELAY 1ms
</span></span><span style="display:flex;"><span>SPI&gt; %:10
</span></span><span style="display:flex;"><span>DELAY 10ms
</span></span><span style="display:flex;"><span>SPI&gt;
</span></span></code></pre></div><p>&amp; delays 1us, % delays 1ms. Use the repeat command for multiple delays.</p>
<h3 id="-repeat-eg-r10">&lsquo;:&rsquo; Repeat (e.g. r:10)</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>SPI&gt; &amp;:10
</span></span><span style="display:flex;"><span>DELAY 10us
</span></span><span style="display:flex;"><span>SPI&gt; r:0b10
</span></span><span style="display:flex;"><span>READ: 0x00 0x00
</span></span><span style="display:flex;"><span>SPI&gt; 5:0x3
</span></span><span style="display:flex;"><span>WRITE: 0x05 0x05 0x05
</span></span><span style="display:flex;"><span>SPI&gt;
</span></span></code></pre></div><p>Many Buzzpirat commands can be repeated by adding &lsquo;: &rsquo; to a command, followed by the number of times to repeat the command. To read five byte, enter r:5, etc. The repeat values can be HEX/DEC/BIN.</p>
<h3 id="-partial-16-bit-readwrite-eg-0x553">&lsquo;;&rsquo; Partial (&lt;16 bit) read/write (e.g. 0x55;3)</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>2WIRE&gt; 0xaa;4
</span></span><span style="display:flex;"><span>WRITE: 0x0A;4
</span></span></code></pre></div><p>Will write 0x0a (4 bits) to the bus.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>2WIRE&gt; 0xFFFF;12
</span></span><span style="display:flex;"><span>WRITE: 0x0FFF;12
</span></span></code></pre></div><p>Will write 0x0FFF (12 bits) to the bus.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>2WIRE&gt; 0x55:4;2
</span></span><span style="display:flex;"><span>WRITE: 0x01;2 0x01;2 0x1;2 0x01;2
</span></span></code></pre></div><p>Can be combined with the repeat command.</p>
<p>NOTE: works currently only with the raw2wire and raw3wire busses.</p>
<h2 id="1-wire">1-Wire</h2>
<ul>
<li><strong>Bus:</strong> <a href="http://en.wikipedia.org/wiki/1-Wire">1-Wire</a> (Dallas/Maxim 1-Wire protocol).</li>
<li><strong>Connections:</strong> one pin (OWD) and ground.</li>
<li><strong>Output types:</strong> open drain/open collector, pull-up resistor required.</li>
<li><strong>Pull-up resistors:</strong> always required (2K – 10K, 2K or less for parasitic power parts).</li>
<li><strong>Maximum voltage:</strong> 5.5volts (5volt safe).</li>
</ul>
<p>1-Wire uses a single data signal wire. Most devices also require a power and ground connection. Some parts draw power parasitically through the 1-Wire bus and don&rsquo;t require a separate power source.</p>
<h3 id="syntax">Syntax</h3>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>A/a/@</code></td>
<td>Toggle auxiliary pin. Capital “A” sets AUX high, small “a” sets to ground. @ sets aux to input (high impedance mode) and reads the pin value.</td>
</tr>
<tr>
<td><code>D/d</code></td>
<td>Measure voltage on the ADC pin (v1+ hardware only).</td>
</tr>
<tr>
<td><code>W/w</code></td>
<td>Capital ‘W’ enables the on-board power supplies. Small ‘w’ disables them. (v1+ hardware only).</td>
</tr>
<tr>
<td><code>{</code> or <code>[</code></td>
<td>1-Wire bus reset.</td>
</tr>
<tr>
<td><code>]</code> or <code>}</code></td>
<td>–</td>
</tr>
<tr>
<td><code>r</code></td>
<td>Read one byte. (<code>r:1…255</code> for bulk reads)</td>
</tr>
<tr>
<td><code>0b</code></td>
<td>Write this binary value. Format is 0b00000000 for a byte, but partial bytes are also fine: 0b1001.</td>
</tr>
<tr>
<td><code>0x</code></td>
<td>Write this HEX value. Format is 0×01. Partial bytes are fine: 0xA. A-F can be lower-case or capital letters.</td>
</tr>
<tr>
<td><code>0-255</code></td>
<td>Write this decimal value. Any number not preceded by 0x or 0b is interpreted as a decimal value.</td>
</tr>
<tr>
<td><code>,</code></td>
<td>Value delimiter. Use a coma or space to separate numbers. Any combination is fine, no delimiter is required between non-number values: <code>{0xa6,0, 0 16 5 0b111 0xaF}</code>.</td>
</tr>
<tr>
<td><code>&amp;</code></td>
<td>Delay 1uS. (<code>&amp;:1…255</code> for multiple delays)</td>
</tr>
<tr>
<td><code>(#)</code></td>
<td>Run macro, <code>(0)</code> for macro list</td>
</tr>
<tr>
<td><code>Bitwise</code></td>
<td>-</td>
</tr>
<tr>
<td><code>^</code></td>
<td>One clock tick, use data state from previous – or _ operation. (<code>^:1…255</code> for multiple clock ticks)</td>
</tr>
<tr>
<td><code>/</code> or <code>\</code></td>
<td>–</td>
</tr>
<tr>
<td><code>-</code> or <code>_</code></td>
<td>Set the 1-Wire data state to 1 (-) or 0 (_). This will be used on the next ^ command, no actual bus change. (updated in v5.2, this previously set the state and sent a bit)</td>
</tr>
<tr>
<td><code>!</code></td>
<td>Read one bit with clock.</td>
</tr>
<tr>
<td><code>.</code></td>
<td>Read current data state setting from last - or _ command, no actual bus change.</td>
</tr>
</tbody>
</table>
<h3 id="macro">Macro</h3>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0</code></td>
<td>Macro menu</td>
</tr>
<tr>
<td><code>1-50</code></td>
<td>Reserved for device address shortcuts.</td>
</tr>
<tr>
<td><code>51</code></td>
<td>READ ROM (0×33) *for single device bus</td>
</tr>
<tr>
<td><code>85</code></td>
<td>MATCH ROM (0×55) *followed by 64bit address</td>
</tr>
<tr>
<td><code>204</code></td>
<td>SKIP ROM (0xCC) *followed by command</td>
</tr>
<tr>
<td><code>236</code></td>
<td>ALARM SEARCH (0xEC)</td>
</tr>
<tr>
<td><code>240</code></td>
<td>SEARCH ROM (0xF0)</td>
</tr>
</tbody>
</table>
<p><strong>Notes:</strong></p>
<p>1-Wire specifies a 2K or smaller resistor when working with parasitically powered devices. Since v3a the on-board pull-up resistor on MOSI are 2K. Use an external 2K pull-up resistor if you have a v2go. Parasitically powered parts may appear to work with resistors larger than 2K ohms, but will fail certain operations (like EEPROM writes).</p>
<p>The 1-wire reset command can detect two bus errors. If no 1-wire chips respond to the reset command by pulling the bus low, it will report *No device detected (0x02). If the bus stays low for too long after the reset, because the pull-up resistor isn&rsquo;t working or there&rsquo;s a short circuit, it will report *Short or no pull-up (0x01).</p>
<p>One wire is a time sensitive protocol. There&rsquo;s no actual data wire to set high or low with the - and _ commands, so I just store the desired value and send it with the next clock tick (^).</p>
<p>The _ and - commands just set the data state that will be used on the next clock tick command (^). Example: previously you could write 4 high bits with -^^^, now you must use -^^^^. I feel this is more consistent with the operation of the other modes.</p>
<h2 id="uart">UART</h2>
<ul>
<li><strong>Bus:</strong> <a href="http://en.wikipedia.org/wiki/Serial_uart">UART</a>, <a href="http://en.wikipedia.org/wiki/Musical_Instrument_Digital_Interface">MIDI</a> (universal asynchronous receiver transmitter).</li>
<li><strong>Connections:</strong> two pins (RX/TX) and ground.</li>
<li><strong>Output types:</strong> 3.3volt normal output, or <a href="http://en.wikipedia.org/wiki/High_impedence">open collector</a>  pull-up resistors required.</li>
<li><strong>Pull-up resistors:</strong> required for open collector output mode (2K – 10K).</li>
<li><strong>Maximum Voltage:</strong> 5.5volts (5volt safe).</li>
</ul>
<p>UART is also known as the common PC serial port. The PC serial port operates at full RS232 voltage levels (-13volts to +13volts) which are not compatible with the Buzzpirat.</p>
<h3 id="configuration-options">Configuration options</h3>
<ul>
<li><strong>Speed (bps):</strong> 300, 1200, 2400, 4800, 9600, 19200, 38400, 57600, 115200, 31250, BRG.</li>
<li><strong>Data bits and parity:</strong> 8/none, 8/even, 8/odd, 9/none.</li>
<li><strong>Stop bits:</strong> 1, 2.</li>
<li><strong>Receive polarity:</strong> idle 1, idle 0.</li>
<li><strong>Output type:</strong> open drain/open collector (high=Hi-Z, low=ground), normal (high=3.3volts, low=ground). Use open drain/open collector output types with pull-up resistors for multi-voltage interfacing.</li>
</ul>
<h3 id="syntax-1">Syntax</h3>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>A/a/@</code></td>
<td>Toggle auxiliary pin. Capital “A” sets AUX high, small “a” sets to ground. @ sets aux to input (high impedance mode) and reads the pin value.</td>
</tr>
<tr>
<td><code>D/d</code></td>
<td>Measure voltage on the ADC pin (v1+ hardware only).</td>
</tr>
<tr>
<td><code>W/w</code></td>
<td>Capital ‘W’ enables the on-board power supplies. Small ‘w’ disables them. (v1+ hardware only).</td>
</tr>
<tr>
<td><code>[</code></td>
<td>Open UART, discard received bytes.</td>
</tr>
<tr>
<td><code>{</code></td>
<td>Open UART, display data as it arrives asynchronously.</td>
</tr>
<tr>
<td><code>]</code> or <code>}</code></td>
<td>Close UART.</td>
</tr>
<tr>
<td><code>r</code></td>
<td>Check UART for byte, or fail if empty. Displays framing (-f) and parity (-p) errors (<code>r:1…255</code> for bulk reads)</td>
</tr>
<tr>
<td><code>0b</code></td>
<td>Write this binary value. Format is 0b00000000 for a byte, but partial bytes are also fine: 0b1001.</td>
</tr>
<tr>
<td><code>0x</code></td>
<td>Write this HEX value. Format is 0×01. Partial bytes are fine: 0xA. A-F can be lower-case or capital letters.</td>
</tr>
<tr>
<td><code>0-255</code></td>
<td>Write this decimal value. Any number not preceded by 0x or 0b is interpreted as a decimal value.</td>
</tr>
<tr>
<td><code>,</code></td>
<td>Value delimiter. Use a coma or space to separate numbers. Any combination is fine, no delimiter is required between non-number values: <code>{0xa6,0, 0 16 5 0b111 0xaF}</code>.</td>
</tr>
<tr>
<td><code>&amp;</code></td>
<td>Delay 1uS. (<code>&amp;:1…255</code> for multiple delays)</td>
</tr>
<tr>
<td><code>(#)</code></td>
<td>Run macro, <code>(0)</code> for macro list</td>
</tr>
</tbody>
</table>
<h3 id="r-read-a-byte">&lsquo;r&rsquo; read a byte</h3>
<p>UART mode requires special handling compared to the other Buzzpirat modes because data can arrive at any time. UART mode displays framing and parity errors, and automatically clears buffer overruns.</p>
<h3 id="parity-and-framing-errors">Parity and framing errors</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>READ: -p -f 0×40 &lt;&lt;&lt;-p -f flag set
</span></span></code></pre></div><p>The Buzzpirat reports framing errors (-f) and parity errors (-p) when reading a byte from the UART. It’s unlikely you’ll see these errors unless the UART speed is mismatched with the sender.</p>
<h3 id="buffer-overrun-errors">Buffer overrun errors</h3>
<p>The Buzzpirat hardware has a four-byte UART buffer that holds data until you read it with an ‘r’ command, or until it can be printed to the terminal if live display is enabled with ‘[&rsquo;. After it fills, new data will be lost. This is called a buffer overrun.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>READ: 0x40 *Bytes dropped*&lt;&lt;&lt;bytes dropped error
</span></span></code></pre></div><p>The Buzzpirat detects buffer errors, clears them, and alerts you of dropped bytes. The overrun bit is cleared any time you use the r, {, or [commands. If you close the live UART display (]) and more than 5 bytes come in, the next read command (r) will clear the error and print the <em>bytes dropped</em> warning.</p>
<p>Prevent buffer problems by reducing the amount of data the Buzzpirat transfers over USB for each byte of UART data. Raw display mode reduces the four byte hex value 0×00 to a single raw byte value. A better way is to use macro (1) or (2) to view unformatted UART output, this is a 1:1 transfer of bytes that should work at the highest possible speeds.</p>
<h3 id="custom-baud-rate">Custom baud rate</h3>
<p>A custom baud rate is set with the BRG option. Use a PIC UART calculator to find the correct value.</p>
<p>Set the calculator with the Buzzpirat values: PIC24, 32MHz clock. Enter the desired baud rate and hit calculate. Use the value from the BRGH=1 section. For 9700bps enter 411 at the Buzzpirat BRG prompt.</p>
<h3 id="macros">Macros</h3>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0</code></td>
<td>Macro menu</td>
</tr>
<tr>
<td><code>1</code></td>
<td>Transparent UART bridge. Reset to exit.</td>
</tr>
<tr>
<td><code>2</code></td>
<td>Live raw UART monitor. Any key exits.</td>
</tr>
<tr>
<td><code>3</code></td>
<td>Transparent UART bridge with flow control.</td>
</tr>
</tbody>
</table>
<h4 id="transparent-uart-bridge">Transparent UART bridge</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>UART&gt;(1)&lt;&lt;&lt;macro 1, transparent UART bridge
</span></span><span style="display:flex;"><span>UART bridge. Space continues, anything else exits.
</span></span><span style="display:flex;"><span>Reset to exit.
</span></span></code></pre></div><p>The transparent UART mode macro (1) creates a simple serial-&gt;USB bridge. The only way to exit this mode is to reset the Buzzpirat hardware.</p>
<p>Buffer overrun errors that occur during bridge mode are automatically cleared so that data continues as normal (firmware v3.0+). The MODE LED will turn off to alert you of the buffer overrun error.</p>
<p>Macro (3) is a second UART bridge mode that includes the CTS and RTS flow control signals. CTS is on the CS pin (PIC input from external circuit is passed to FTDI USB-&gt;serial chip). RTS is on the CLOCK pin (PIC output mirrors output from FTDI chip).</p>
<p>Note that the Buzzpirat serial port UART facing the computer (the one that connects to the USB-&gt;serial converter chip and sends text to your computer) is NOT adjusted to the same speed as the UART bridge. The USB-side serial port UART will continue to operate at the default setting (115200bps) unless adjusted with the &lsquo;b&rsquo; menu.</p>
<p>If you use the UART bridge with a computer program that opens the virtual serial port at a different baud rate, say 9600bps, the exchange will be garbled because the Buzzpirat expects 115200bps input from the computer. Adjust the computer-side serial speed first with the &lsquo;b&rsquo; menu, then start the serial bridge at the desired speed.</p>
<h4 id="live-uart-monitor">Live UART monitor</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>UART&gt;(2)&lt;&lt;&lt;macro 2, UART monitor
</span></span><span style="display:flex;"><span>Raw UART input. Space to exit.
</span></span><span style="display:flex;"><span>UART&gt;
</span></span></code></pre></div><p>The UART monitor macro (2) shows a live display of UART input as raw byte values without any type of formatting. Press any key to exit the live monitor. This mode works best with a terminal that can display raw byte values in a variety of formats.</p>
<p>This macro is like the transparent UART macro (1) but without transmission abilities, and it can be exited with a key press. It’s useful for monitoring high-speed UART input that causes buffer overrun errors in other modes.</p>
<h3 id="midi">MIDI</h3>
<p>MIDI is a command set used by electronic (music) instruments. It travels over a standard serial UART configured for 31250bps/8/n/1. Since firmware v2.7 MIDI is a speed option in the UART library.</p>
<p>MIDI is a ring network, each node has an input and output socket. Each node passes messages to the next in the ring. The input and outputs are opto-isolated. The signaling is at 5volts, 5ma (current-based signaling). An adapter is required.</p>
<h3 id="connections">Connections</h3>
<p>Connect the Buzzpirat transmit pin (TX/MOSI) to the UART device receive pin (RX). Connect the Buzzpirat receive pin (RX/MISO) to the UART device transmit pin (TX).</p>
<p>For macros and modes with flow control: CTS is on the CS pin (PIC input from external circuit is passed to FTDI USB-&gt;serial chip). RTS is on the CLOCK pin (PIC output mirrors output from FTDI chip)</p>
<h2 id="i2c">I2C</h2>
<ul>
<li><strong>Bus:</strong> <a href="http://en.wikipedia.org/wiki/I2c">I2C</a> (eye-squared-see or eye-two-see)</li>
<li><strong>Connections:</strong> two pins (SDA/SCL) and ground</li>
<li><strong>Output types:</strong> <a href="/docs/Pull-up_resistors,_high_impedance_pins,_and_open_collector_buses">open drain/open collector</a></li>
<li><strong>Pull-up resistors:</strong> pull-ups always required (2K - 10K ohms)</li>
<li><strong>Maximum voltage:</strong> 5.5volts (5volt safe)</li>
</ul>
<p>I2C is a common 2-wire bus for low speed interfaces.</p>
<p>I2C implementation does not currently support clock stretching.</p>
<h3 id="configuration-options-1">Configuration options</h3>
<ul>
<li><strong>Speed:</strong> I2C has three speed options:~50kHz, ~100kHz, and ~400kHz.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>HiZ&gt;m&lt;&lt;&lt;open the mode menu
</span></span><span style="display:flex;"><span>1. HiZ
</span></span><span style="display:flex;"><span>…
</span></span><span style="display:flex;"><span>4. I2C
</span></span><span style="display:flex;"><span>…
</span></span><span style="display:flex;"><span>(1) &gt;4&lt;&lt;&lt;choose I2C mode
</span></span><span style="display:flex;"><span>Set speed:
</span></span><span style="display:flex;"><span>1. 50KHz
</span></span><span style="display:flex;"><span>2. 100KHz
</span></span><span style="display:flex;"><span>3. 400kHz
</span></span><span style="display:flex;"><span>(1) &gt;1&lt;&lt;&lt;choose I2C speed
</span></span><span style="display:flex;"><span>I2C READY
</span></span><span style="display:flex;"><span>I2C&gt;
</span></span></code></pre></div><h4 id="pull-up-resistors">Pull-up resistors</h4>
<p>I2C is an open-collector bus, it requires pull-up resistors to hold the clock and data lines high and create the data &lsquo;1&rsquo;. I2C parts don&rsquo;t output high, they only pull low, without pull-up resistors there can never be a &lsquo;1&rsquo;. This will cause common errors such as the I2C address scanner reporting a response at every address. Read more about open drain/open collector bus types, and the Buzzpirat&rsquo;s on-board pull-up resistors.</p>
<p>I2C requires pull-up resistors to hold the clock and data lines high.
I2C parts don&rsquo;t output high, they only pull low.
Without pull-up resistors there can never be a &lsquo;1&rsquo;.</p>
<h3 id="syntax-2">Syntax</h3>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>A/a/@</code></td>
<td>Toggle auxiliary pin. Capital “A” sets AUX high, small “a” sets to ground. @ sets aux to input (high impedance mode) and reads the pin value.</td>
</tr>
<tr>
<td><code>D/d</code></td>
<td>Measure voltage on the ADC pin (v1+ hardware only).</td>
</tr>
<tr>
<td><code>W/w</code></td>
<td>Capital ‘W’ enables the on-board power supplies. Small ‘w’ disables them. (v1+ hardware only).</td>
</tr>
<tr>
<td><code>{</code> or <code>[</code></td>
<td>Issue I2C start condition.</td>
</tr>
<tr>
<td><code>]</code> or <code>}</code></td>
<td>Issue I2C stop condition.</td>
</tr>
<tr>
<td><code>r</code></td>
<td>Read one byte, send ACK. (<code>r:1…255</code> for bulk reads)</td>
</tr>
<tr>
<td><code>0b</code></td>
<td>Write this binary value, check ACK. Format is <code>0b00000000</code> for a byte, but partial bytes are also fine: <code>0b1001</code>.</td>
</tr>
<tr>
<td><code>0x</code></td>
<td>Write this HEX value, check ACK. Format is <code>0×01</code>. Partial bytes are fine: <code>0xA</code>. A-F can be lower-case or capital letters.</td>
</tr>
<tr>
<td><code>0-255</code></td>
<td>Write this decimal value, check ACK. Any number not preceded by <code>0x</code> or <code>0b</code> is interpreted as a decimal value.</td>
</tr>
<tr>
<td><code>,</code></td>
<td>Value delimiter. Use a coma or space to separate numbers. Any combination is fine, no delimiter is required between non-number values: <code>{0xa6,0, 0 16 5 0b111 0xaF}</code>.</td>
</tr>
<tr>
<td><code>&amp;</code></td>
<td>Delay 1uS. (<code>&amp;:1…255</code> for multiple delays)</td>
</tr>
<tr>
<td><code>(#)</code></td>
<td>Run macro, <code>(0)</code> for macro list</td>
</tr>
</tbody>
</table>
<h3 id="macro-1">Macro</h3>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0</code></td>
<td>Macro menu</td>
</tr>
<tr>
<td><code>1</code></td>
<td>7bit address search. Find all connected devices by brute force.</td>
</tr>
<tr>
<td><code>2</code></td>
<td>I2C snooper (alpha testing, unlisted) v2.1+</td>
</tr>
</tbody>
</table>
<h4 id="i2c-address-search-scanner-macro">I2C address search scanner macro</h4>
<p>You can find the <a href="http://en.wikipedia.org/wiki/I%C2%B2C">I2C</a> address for most I2C-compatible chips in the datasheet. But what if you&rsquo;re working with an unknown chip, a dated chip with no datasheet, or you&rsquo;re just too lazy to look it up?</p>
<p>The Buzzpirat has a built-in address scanner that checks every possible I2C address for a response. This brute force method is a fast and easy way to see if any chips are responding, and to uncover undocumented access addresses.</p>
<p>I2C chips respond to a 7bit address, so up to 128 devices can share the same two communication wires. An additional bit of the address determines if the operation is a write to the chip (0), or a read from the chip (1).</p>
<p>I connected the Buzzpirat to the 3EEPROM explorer board. The 7bit base address for the 24LC/AA I2C EEPROM is 101 0000 (0x50 in HEX). It answers at the write address 1010 0000 (0xA0) and the read address 1010 0001 (0xA1).</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>I2C&gt;(1)
</span></span><span style="display:flex;"><span>Searching 7bit I2C address space.
</span></span><span style="display:flex;"><span>Found devices at:
</span></span><span style="display:flex;"><span>0xA0(0x50 W) 0xA1(0x50 R)
</span></span><span style="display:flex;"><span>I2C&gt;
</span></span></code></pre></div><p>Macro 1 in the I2C library runs the address scanner. The scanner displays the raw addresses the chip acknowledged (0xA0, 0xA1), and the 7bit address equivalent (0x50) with write or read bit indicators (W/R). Datasheets usually list the 7bit address, but the 8bit value is more recognizable on a logic analyzer, snooper, debugger, etc.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>I2C&gt; (1)
</span></span><span style="display:flex;"><span>Searching I2C address space. Found devices at:
</span></span><span style="display:flex;"><span>Warning: *Short or no pull-up
</span></span><span style="display:flex;"><span>I2C&gt;
</span></span></code></pre></div><p>The scanner will find a chip at every address if there&rsquo;s no pull-up resistors on the I2C bus. This is a really common error. the scanner checks for pull-ups, and exits with an error if the bus isn&rsquo;t pulled up.</p>
<h5 id="scanner-details">Scanner details</h5>
<p>Details about the address scanner macro are at the end of this post and around here in the source.</p>
<ul>
<li>
<p>For I2C write addresses: the BP sends a start, the write address, looks for an ACK, then sends a stop.</p>
</li>
<li>
<p>For I2C read addresses: the BP sends a start, the read address, looks for an ACK. If there is an ACK, it reads a byte and NACKs it. Finally it sends a stop.</p>
</li>
</ul>
<p>When the I2C chip responds to the read address, it outputs data and will miss a stop condition sent immediately after the read address (bus contention). If the I2C chip misses the stop condition, the address scanner will see ghost addresses until the read ends randomly. By reading a byte after any read address that ACKs, I have a chance to NACK the read and properly end the I2C transaction.</p>
<h4 id="i2c-bus-sniffer-macro">I2C Bus Sniffer macro</h4>
<p>The I2C sniffer is implemented in software and seems to work up to 100kHz (firmware v5.3+). It’s not a substitute for a proper logic analyzer, but additional improvements are probably possible.</p>
<ul>
<li>[/] – Start/stop bit</li>
<li>+/- – ACK/NACK</li>
</ul>
<p>I2C start and stop bits are represented by the normal Buzzpirat syntax.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>I2C&gt; (2)
</span></span><span style="display:flex;"><span>Sniffer
</span></span><span style="display:flex;"><span>Any key to exit
</span></span><span style="display:flex;"><span>[0x40-][0x40-0x40-0x30-0x56-0x77-]
</span></span><span style="display:flex;"><span>I2C&gt;
</span></span></code></pre></div><p>Sniffed data values are always HEX formatted in user mode. Press any key to exit the sniffer.</p>
<p>Notes The sniffer uses a 4096byte output ring buffer. Sniffer output goes into the ring buffer and gets pushed to the PC when the UART is free. This should eliminate problems with dropped bytes, regardless of UART speed or display mode. A long enough stream of data will eventually overtake the buffer, after which bytes are dropped silently (will be updated after v5.3).</p>
<p>Any commands entered after the sniffer macro will be lost.</p>
<p>Pins that are normally output become inputs in sniffer node. MOSI and CLOCK are inputs in I2C sniffer mode.</p>
<p>The I2C sniffer maximum speed is around 100kHz.</p>
<h3 id="acknack-management">ACK/NACK management</h3>
<p>These examples read and write from the RAM of a DS1307 RTC chip.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>I2C&gt; [0xd1 rrrr]
</span></span><span style="display:flex;"><span>I2C START CONDITION
</span></span><span style="display:flex;"><span>WRITE: 0xD1 GOT ACK: YES&lt;&lt;&lt;read address
</span></span><span style="display:flex;"><span>READ: 0×07 ACK &lt;&lt;&lt;sent ACK[
</span></span><span style="display:flex;"><span>READ: 0x06 ACK
</span></span><span style="display:flex;"><span>READ: 0x05 ACK
</span></span><span style="display:flex;"><span>READ: 0x04 NACK &lt;&lt;&lt;last read before STOP, sent NACK
</span></span><span style="display:flex;"><span>I2C STOP CONDITION
</span></span><span style="display:flex;"><span>I2C&gt;
</span></span></code></pre></div><p>I2C read operations must be ACKed or NACKed by the host (the Buzzpirat). The Buzzpirat automates this, but you should know a few rules about how it works.</p>
<p>The I2C library doesn&rsquo;t ACK/NACK a read operation until the following command. If the next command is a STOP (or START) the Buzzpirat sends a NACK bit. On all other commands it sends an ACK bit. The terminal output displays the (N)ACK status.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>I2C&gt; [0xd1 r:5]
</span></span><span style="display:flex;"><span>I2C START CONDITION
</span></span><span style="display:flex;"><span>WRITE: 0xD1 GOT ACK: YES
</span></span><span style="display:flex;"><span>BULK READ 0×05 BYTES:
</span></span><span style="display:flex;"><span>0×07 ACK 0×06 ACK 0×05 ACK 0×04 ACK 0×03 NACK
</span></span><span style="display:flex;"><span>I2C STOP CONDITION
</span></span><span style="display:flex;"><span>I2C&gt;
</span></span></code></pre></div><p>Nothing changes for write commands because the slave ACKs to the Buzzpirat during writes. Here’s an example using the bulk read command (r:5).</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>I2C&gt;[0xd1 r &lt;&lt;&lt;setup and read one byte
</span></span><span style="display:flex;"><span>I2C START CONDITION
</span></span><span style="display:flex;"><span>WRITE: 0xD1 GOT ACK: YES
</span></span><span style="display:flex;"><span>READ: 0x07 *(N)ACK PENDING &lt;&lt;&lt;no ACK sent yet
</span></span><span style="display:flex;"><span>I2C&gt;r&lt;&lt;&lt;read another byte
</span></span><span style="display:flex;"><span>ACK &lt;&lt;&lt;ACK for previous byte
</span></span><span style="display:flex;"><span>READ: 0x06 *(N)ACK PENDING &lt;&lt;&lt;no ACK yet
</span></span><span style="display:flex;"><span>I2C&gt;] &lt;&lt;&lt;STOP command
</span></span><span style="display:flex;"><span>NACK &lt;&lt;&lt;next command is STOP, so NACK
</span></span><span style="display:flex;"><span>I2C STOP CONDITION
</span></span><span style="display:flex;"><span>I2C&gt;
</span></span></code></pre></div><p>A consequence of the delayed ACK/NACK system is that partial transactions will leave read operations incomplete.</p>
<p>Here, I setup a read operation ([0xd1) and read a byte (r). Since the Buzzpirat has no way of knowing if the next operation will be another read (r) or a stop condition (]), it leaves the ninth bit hanging. The warning “*(N)ACK PENDING” alerts you to this state.</p>
<p>Our next command is another read (r), so the Buzzpirat ACKs the previous read and gets another byte. Again, it leaves the (N)ACK bit pending until the next command.</p>
<p>The final command is STOP (]). The Buzzpirat ends the read with a NACK and then sends the stop condition.</p>
<h3 id="connections-1">Connections</h3>
<table>
<thead>
<tr>
<th>Buzzpirat</th>
<th>Dir.</th>
<th>Circuit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>MOSI</td>
<td>↔</td>
<td>SDA</td>
<td>Serial Data</td>
</tr>
<tr>
<td>CLK</td>
<td>→</td>
<td>SCL</td>
<td>Serial Clock</td>
</tr>
<tr>
<td>GND</td>
<td>⏚</td>
<td>GND</td>
<td>Signal Ground</td>
</tr>
</tbody>
</table>
<h2 id="spi">SPI</h2>
<ul>
<li><strong>Bus:</strong> <a href="http://en.wikipedia.org/wiki/Serial_Peripheral_Interface_Bus">SPI (serial peripheral interface)</a>.</li>
<li><strong>Connections:</strong> Four pins (MOSI/MISO/CLOCK/CS) and ground.</li>
<li><strong>Output type:</strong> 3.3 volt normal, or <a href="http://en.wikipedia.org/wiki/High_impedence">open collector</a> pull-up resistors required.</li>
<li><strong>Pull-up resistors:</strong> Required for open drain output mode (2K – 10K).</li>
<li><strong>Maximum voltage:</strong> 5.5 volts (5 volt safe).</li>
<li><strong>Last documentation update:</strong> v5.8.</li>
</ul>
<h3 id="configuration-options-2">Configuration options</h3>
<ul>
<li><em>Speed:</em> 30, 125, 250 kHz; 1, 2, 2.6, 4, 8 MHz</li>
<li><em>Clock polarity:</em> Idle low, idle high.</li>
<li><em>Output clock edge:</em> Idle to active, active to idle.</li>
<li><em>Input sample phase:</em> Middle, end.</li>
<li><em>Output type:</em> Open drain/open collector (high=Hi-Z, low=ground), normal (high=3.3 volts, low=ground). Use open drain/open collector output types with pull-up resistors for multi-voltage interfacing.</li>
</ul>
<h3 id="syntax-3">Syntax</h3>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>A/a/@</code></td>
<td>Toggle auxiliary pin. Capital “A” sets AUX high, small “a” sets to ground. <code>@</code> sets aux to input (high impedance mode) and reads the pin value.</td>
</tr>
<tr>
<td><code>D/d</code></td>
<td>Measure voltage on the ADC pin (v1+ hardware only).</td>
</tr>
<tr>
<td><code>W/w</code></td>
<td>Capital ‘W’ enables the on-board power supplies. Small ‘w’ disables them. (v1+ hardware only).</td>
</tr>
<tr>
<td><code>[</code></td>
<td>Chip select (CS) active (low).</td>
</tr>
<tr>
<td><code>{</code></td>
<td>CS active (low), show the SPI read byte after every write.</td>
</tr>
<tr>
<td><code>]</code> or <code>}</code></td>
<td>CS disable (high).</td>
</tr>
<tr>
<td><code>r</code></td>
<td>Read one byte by sending dummy byte (0xff). (<code>r:1…255</code> for bulk reads)</td>
</tr>
<tr>
<td><code>0b</code></td>
<td>Write this binary value. Format is <code>0b00000000</code> for a byte, but partial bytes are also fine: <code>0b1001</code>.</td>
</tr>
<tr>
<td><code>0x</code></td>
<td>Write this HEX value. Format is <code>0x01</code>. Partial bytes are fine: <code>0xA</code>. A-F can be lower-case or capital letters.</td>
</tr>
<tr>
<td><code>0-255</code></td>
<td>Write this decimal value. Any number not preceded by <code>0x</code> or <code>0b</code> is interpreted as a decimal value.</td>
</tr>
<tr>
<td><code>,</code></td>
<td>Value delimiter. Use a comma or space to separate numbers. Any combination is fine, no delimiter is required between non-number values: <code>{0xa6,0, 0 16 5 0b111 0xaF}</code>.</td>
</tr>
<tr>
<td><code>&amp;</code></td>
<td>Delay 1uS. (<code>&amp;:1…255</code> for multiple delays)</td>
</tr>
<tr>
<td><code>(#) </code></td>
<td>Run macro, <code>(0)</code> for macro list</td>
</tr>
</tbody>
</table>
<h3 id="macro-2">Macro</h3>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0</code></td>
<td>Macro menu</td>
</tr>
<tr>
<td><code>1</code></td>
<td>SPI bus sniffer, sniff when CS is low (hardware CS filter)</td>
</tr>
<tr>
<td><code>2</code></td>
<td>SPI bus sniffer, sniff all traffic (no CS filter)</td>
</tr>
<tr>
<td><code>3</code></td>
<td><s>SPI bus sniffer, sniff when CS is high (software CS filter)</s> Temporarily removed to increase speed.</td>
</tr>
<tr>
<td><code>10</code></td>
<td>Change clock polarity to 0 without re-entering SPI mode</td>
</tr>
<tr>
<td><code>11</code></td>
<td>Change clock polarity to 1 without re-entering SPI mode</td>
</tr>
<tr>
<td><code>12</code></td>
<td>Change clock edge to 0 without re-entering SPI mode</td>
</tr>
<tr>
<td><code>13</code></td>
<td>Change clock edge to 1 without re-entering SPI mode</td>
</tr>
<tr>
<td><code>14</code></td>
<td>Change sample phase to 0 without re-entering SPI mode</td>
</tr>
<tr>
<td><code>15</code></td>
<td>Change sample phase to 1 without re-entering SPI mode</td>
</tr>
</tbody>
</table>
<h3 id="spi-bus-sniffer">SPI Bus sniffer</h3>
<p>The Buzzpirat can read the traffic on an SPI bus.</p>
<p>Warning! Enter sniffer mode before connecting the target!!
The Buzzpirat SPI CLOCK or DATA lines could be grounded and ruin the target device!
Reset with the CS pin to clear garbage if needed</p>
<p>Pin connections are the same as normal SPI mode. Connect the Buzzpirat clock to the clock on the SPI bus you want to sniff. The data pins MOSI and MISO are both inputs, connect them to the SPI bus data lines. Connect the CS pin to the SPI bus CS pin.</p>
<ul>
<li><code>[/]</code> – CS enable/disable</li>
<li><code>0xXX</code> – MOSI read</li>
<li><code>(0xXX)</code> – MISO read</li>
</ul>
<p>SPI CS pin transitions are represented by the normal Buzzpirat syntax. The byte sniffed on the MISO pin is displayed inside <code>()</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>SPI&gt; (0)
</span></span><span style="display:flex;"><span>0.Macro menu
</span></span><span style="display:flex;"><span>1.Sniff CS low
</span></span><span style="display:flex;"><span>2.Sniff all traffic
</span></span><span style="display:flex;"><span>SPI&gt; (1)
</span></span><span style="display:flex;"><span>Sniffer
</span></span><span style="display:flex;"><span>Any key to exit
</span></span><span style="display:flex;"><span>[0x30(0x00)0xff(0x12)0xff(0x50)][0x40(0x00)]
</span></span></code></pre></div><p>The SPI sniffer can read all traffic, or filter by the state of the CS pin. The byte sniffed on the MOSI pin is displayed as a HEX formatted value, the byte sniffed on the MISO pin is inside the ().</p>
<p>There may be an issue in the sniffer terminal mode from v5.2+.
Try the binary mode sniffer utility for best results.
Notes</p>
<p>The sniffer uses a 4096byte output ring buffer. Sniffer output goes into the ring buffer and gets pushed to the PC when the UART is free. This should eliminate problems with dropped bytes, regardless of UART speed or display mode.</p>
<p>Warning! Enter sniffer mode before connecting the target!!
The Buzzpirat SPI CLOCK or DATA lines could be grounded and ruin the target device!
Reset with the CS pin to clear garbage if needed</p>
<ul>
<li>A long enough stream of data will eventually overtake the buffer, after which the MODE LED turns off (v5.2+). No data can be trusted if the MODE LED is off - this will be improved in a future firmware.</li>
<li>The SPI hardware has a 4 byte buffer. If it fills before I can transfer the data to the ring buffer, then the terminal will display &ldquo;Can&rsquo;t keep up&rdquo; and drop back to the SPI prompt. This error and the ring buffer error will be combined in a future update.</li>
<li>Any commands entered after the sniffer macro will be lost.</li>
<li>Pins that are normally output become inputs in sniffer mode. MOSI, CLOCK, MISO, and CS are all inputs in SPI sniffer mode.</li>
<li>Since v5.3 the SPI sniffer uses hardware chip select for the CS low sniffer mode. The minimum time between CS falling and the first clock is 120ns theoretical, and less than 1.275us in tests. The software CS detect (CS high sniffer mode) requires between 27usec and 50usec minimum delay between the transition of the CS line and the start of data. Thanks to Peter Klammer for testing and updates.</li>
<li>The sniffer follows the output clock edge and output polarity settings of the SPI mode, but not the input sample phase.</li>
</ul>
<h3 id="clock-edgeclock-polaritysample-phase-macros">Clock edge/clock polarity/sample phase macros</h3>
<p>Macros 10-15 change SPI settings without disabling the SPI module. These macros were added at a user&rsquo;s request, but they never reported if it worked.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>SPI&gt; (10)(11)(12)(13)(14)(15)
</span></span><span style="display:flex;"><span>SPI (spd ckp ske smp csl hiz)=( 3 0 1 0 1 1 )
</span></span><span style="display:flex;"><span>SPI (spd ckp ske smp csl hiz)=( 3 1 1 0 1 1 )
</span></span><span style="display:flex;"><span>SPI (spd ckp ske smp csl hiz)=( 3 1 0 0 1 1 )
</span></span><span style="display:flex;"><span>SPI (spd ckp ske smp csl hiz)=( 3 1 1 0 1 1 )
</span></span><span style="display:flex;"><span>SPI (spd ckp ske smp csl hiz)=( 3 1 1 0 1 1 )
</span></span><span style="display:flex;"><span>SPI (spd ckp ske smp csl hiz)=( 3 1 1 1 1 1 )
</span></span><span style="display:flex;"><span>SPI&gt;
</span></span></code></pre></div><h3 id="connections-2">Connections</h3>
<table>
<thead>
<tr>
<th>Buzzpirat</th>
<th>Dir.</th>
<th>Circuit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>MOSI</td>
<td>→</td>
<td>MOSI</td>
<td>Master Out, Slave In</td>
</tr>
<tr>
<td>MISO</td>
<td>←</td>
<td>MISO</td>
<td>Master In, Slave Out</td>
</tr>
<tr>
<td>CS</td>
<td>→</td>
<td>CS</td>
<td>Chip Select</td>
</tr>
<tr>
<td>CLK</td>
<td>→</td>
<td>CLK</td>
<td>Clock signal</td>
</tr>
<tr>
<td>GND</td>
<td>⏚</td>
<td>GND</td>
<td>Signal Ground</td>
</tr>
</tbody>
</table>
<h2 id="raw-2-wire">Raw 2-wire</h2>
<ul>
<li><strong>Bus:</strong> General purpose 2-wire library with bitwise pin control.</li>
<li><strong>Connections:</strong> Two pins (SDA/SCL) and ground.</li>
<li><strong>Output type:</strong> 3.3 volt normal, or <a href="http://en.wikipedia.org/wiki/High_impedence">open collector</a> pull-up resistors required.</li>
<li><strong>Pull-up resistors:</strong> Required for open drain output mode (2K – 10K).</li>
<li><strong>Maximum voltage:</strong> 5.5 volts (5 volt safe).</li>
<li><strong>Last documentation update:</strong> v5.6.</li>
</ul>
<p>The raw 2 wire library is similar to I2C, but it doesn’t handle acknowledge bits and it has bitwise pin control. I2C could be built using the basic elements in the raw2wire library.</p>
<h3 id="configuration-options-3">Configuration options</h3>
<ul>
<li><strong>Speed:</strong> High (~50kHz) and low (~5kHz).</li>
<li><strong>Output type:</strong> Open drain/open collector (high=Hi-Z, low=ground), normal (high=3.3 volts, low=ground). Use open drain/open collector output types with pull-up resistors for multi-voltage interfacing.</li>
</ul>
<h3 id="syntax-4">Syntax</h3>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>A/a/@</code></td>
<td>Toggle auxiliary pin. Capital “A” sets AUX high, small “a” sets to ground. <code>@</code> sets aux to input (high impedance mode) and reads the pin value.</td>
</tr>
<tr>
<td><code>D/d</code></td>
<td>Measure voltage on the ADC pin (v1+ hardware only).</td>
</tr>
<tr>
<td><code>W/w</code></td>
<td>Capital ‘W’ enables the on-board power supplies. Small ‘w’ disables them. (v1+ hardware only).</td>
</tr>
<tr>
<td><code>{ or [</code></td>
<td>Issue I2C-style start condition.</td>
</tr>
<tr>
<td><code>] or }</code></td>
<td>Issue I2C-style stop condition.</td>
</tr>
<tr>
<td><code>r</code></td>
<td>Read one byte. (<code>r:1…255</code> for bulk reads)</td>
</tr>
<tr>
<td><code>0b</code></td>
<td>Write this binary value. Format is <code>0b00000000</code> for a byte, but partial bytes are also fine: <code>0b1001</code>.</td>
</tr>
<tr>
<td><code>0x</code></td>
<td>Write this HEX value. Format is <code>0×01</code>. Partial bytes are fine: <code>0xA</code>. A-F can be lower-case or capital letters.</td>
</tr>
<tr>
<td><code>0-255</code></td>
<td>Write this decimal value. Any number not preceded by <code>0x</code> or <code>0b</code> is interpreted as a decimal value.</td>
</tr>
<tr>
<td><code>,</code></td>
<td>Value delimiter. Use a comma or space to separate numbers. Any combination is fine, no delimiter is required between non-number values: <code>{0xa6,0, 0 16 5 0b111 0xaF}</code>.</td>
</tr>
<tr>
<td><code>&amp;</code></td>
<td>Delay 1uS. (<code>&amp;:1…255</code> for multiple delays)</td>
</tr>
<tr>
<td><code>(#)</code></td>
<td>Run macro, <code>(0)</code> for macro list</td>
</tr>
<tr>
<td><em>Bitwise</em></td>
<td></td>
</tr>
<tr>
<td><code>^</code></td>
<td>Send one clock tick. (<code>^:1…255</code> for multiple clock ticks)</td>
</tr>
<tr>
<td><code>/ or \</code></td>
<td>Toggle clock level high (<code>/</code>) and low (<code>\</code>). Includes clock delay (100uS).</td>
</tr>
<tr>
<td><code>- or _</code></td>
<td>Toggle data state high (<code>-</code>) and low (<code>_</code>). Includes data setup delay (20uS).</td>
</tr>
<tr>
<td><code>!</code></td>
<td>Read one bit with clock.</td>
</tr>
<tr>
<td><code>.</code></td>
<td>Read data pin state (no clock).</td>
</tr>
</tbody>
</table>
<h3 id="macro-3">Macro</h3>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0</code></td>
<td>Macro menu</td>
</tr>
<tr>
<td><code>1</code></td>
<td>ISO7813-3 ATR for smart cards, parses reply bytes.</td>
</tr>
<tr>
<td><code>2</code></td>
<td>ISO7813-3 parse only (provide your own ATR command).</td>
</tr>
</tbody>
</table>
<h3 id="connections-3">Connections</h3>
<table>
<thead>
<tr>
<th>Buzzpirat</th>
<th>Dir.</th>
<th>Circuit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>MOSI</td>
<td>↔</td>
<td>SDA</td>
<td>Serial Data</td>
</tr>
<tr>
<td>CLK</td>
<td>→</td>
<td>SCL</td>
<td>Serial Clock</td>
</tr>
<tr>
<td>GND</td>
<td>⏚</td>
<td>GND</td>
<td>Signal Ground</td>
</tr>
</tbody>
</table>
<h2 id="raw-3-wire">Raw 3-wire</h2>
<ul>
<li><strong>Bus:</strong> General purpose 3-wire library with bitwise pin control.</li>
<li><strong>Connections:</strong> Four pins (MOSI/MISO/CLOCK/CS) and ground.</li>
<li><strong>Output types:</strong> 3.3 volt normal, or <a href="http://en.wikipedia.org/wiki/High_impedence">open drain/open collector</a> pull-up resistors required.</li>
<li><strong>Pull-up resistors:</strong> Required for open drain output mode (2K – 10K).</li>
<li><strong>Maximum voltage:</strong> 5.5 volts (5 volt safe).</li>
<li><strong>Last documentation update:</strong> v5.6.</li>
</ul>
<p>The raw 3 wire library is like SPI, but includes bitwise pin control.</p>
<h3 id="configuration-options-4">Configuration options</h3>
<ul>
<li><strong>Speed:</strong> High (~50kHz) and low (~5kHz).</li>
<li><strong>Output type:</strong> Open drain/open collector (high=Hi-Z, low=ground), normal (high=3.3 volts, low=ground). Use open drain/open collector output types with pull-up resistors for multi-voltage interfacing.</li>
</ul>
<h3 id="syntax-5">Syntax</h3>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>A/a/@</code></td>
<td>Toggle auxiliary pin. Capital “A” sets AUX high, small “a” sets to ground. <code>@</code> sets aux to input (high impedance mode) and reads the pin value.</td>
</tr>
<tr>
<td><code>D/d</code></td>
<td>Measure voltage on the ADC pin (v1+ hardware only).</td>
</tr>
<tr>
<td><code>W/w</code></td>
<td>Capital ‘W’ enables the on-board power supplies. Small ‘w’ disables them. (v1+ hardware only).</td>
</tr>
<tr>
<td><code>[</code></td>
<td>Chip select (CS) active (low).</td>
</tr>
<tr>
<td><code>{</code></td>
<td>CS active (low), show the SPI read byte after every write.</td>
</tr>
<tr>
<td><code>]</code> or <code>}</code></td>
<td>CS disable (high).</td>
</tr>
<tr>
<td><code>r</code></td>
<td>Read one byte by sending dummy byte (0xff). (<code>r:1…255</code> for bulk reads)</td>
</tr>
<tr>
<td><code>0b</code></td>
<td>Write this binary value. Format is <code>0b00000000</code> for a byte, but partial bytes are also fine: <code>0b1001</code>.</td>
</tr>
<tr>
<td><code>0x</code></td>
<td>Write this HEX value. Format is <code>0x01</code>. Partial bytes are fine: <code>0xA</code>. A-F can be lower-case or capital letters.</td>
</tr>
<tr>
<td><code>0-255</code></td>
<td>Write this decimal value. Any number not preceded by <code>0x</code> or <code>0b</code> is interpreted as a decimal value.</td>
</tr>
<tr>
<td><code>,</code></td>
<td>Value delimiter. Use a comma or space to separate numbers. Any combination is fine, no delimiter is required between non-number values: <code>{0xa6,0, 0 16 5 0b111 0xaF}</code>.</td>
</tr>
<tr>
<td><code>&amp;</code></td>
<td>Delay 1uS. (<code>&amp;:1…255</code> for multiple delays)</td>
</tr>
<tr>
<td><code>(#)</code></td>
<td>Run macro, <code>(0)</code> for macro list</td>
</tr>
<tr>
<td><em>Bitwise</em></td>
<td></td>
</tr>
<tr>
<td><code>^</code></td>
<td>Send one clock tick. (<code>^:1…255</code> for multiple clock ticks)</td>
</tr>
<tr>
<td><code>/</code> or <code>\</code></td>
<td>Toggle clock level high (<code>/</code>) and low (<code>\</code>). Includes clock delay (100uS).</td>
</tr>
<tr>
<td><code>-</code> or <code>_</code></td>
<td>Toggle data state high (<code>-</code>) and low (<code>_</code>). Includes data setup delay (20uS).</td>
</tr>
<tr>
<td><code>!</code></td>
<td>Read one bit with clock.</td>
</tr>
<tr>
<td><code>.</code></td>
<td>Read data pin state (no clock).</td>
</tr>
</tbody>
</table>
<h3 id="connections-4">Connections</h3>
<table>
<thead>
<tr>
<th>Buzzpirat</th>
<th>Dir.</th>
<th>Circuit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>MOSI</td>
<td>→</td>
<td>MOSI</td>
<td>Master Out, Slave In</td>
</tr>
<tr>
<td>MISO</td>
<td>←</td>
<td>MISO</td>
<td>Master In, Slave Out</td>
</tr>
<tr>
<td>CS</td>
<td>→</td>
<td>CS</td>
<td>Chip Select</td>
</tr>
<tr>
<td>CLK</td>
<td>→</td>
<td>CLK</td>
<td>Clock signal</td>
</tr>
<tr>
<td>GND</td>
<td>↔</td>
<td>GND</td>
<td>Signal Ground</td>
</tr>
</tbody>
</table>
<h2 id="hd44780-lcds">HD44780 LCDs</h2>
<ul>
<li><strong>Bus:</strong> <a href="http://ouwehand.net/%7Epeter/lcd/lcd.shtml">HD44780 LCD</a> test library.</li>
<li><strong>Adapter:</strong> 74HCT595-based LCD adapter board</li>
</ul>
<p>The Buzzpirat can test HD44780 LCDs but it needs an IO expander chip. Currently, it uses a simple 74HCT595 adapter</p>
<h3 id="syntax-6">Syntax</h3>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>A/a/@</code></td>
<td>Toggle auxiliary pin. Capital “A” sets AUX high, small “a” sets to ground. <code>@</code> sets aux to input (high impedance mode) and reads the pin value.</td>
</tr>
<tr>
<td><code>D/d</code></td>
<td>Measure voltage on the ADC pin (v1+ hardware only).</td>
</tr>
<tr>
<td><code>W/w</code></td>
<td>Capital ‘W’ enables the on-board power supplies. Small ‘w’ disables them. (v1+ hardware only).</td>
</tr>
<tr>
<td><code>{</code> or <code>[</code></td>
<td>RS low. Next read/write is a COMMAND.</td>
</tr>
<tr>
<td><code>]</code> or <code>}</code></td>
<td>RS high. Next read/write is TEXT/DATA.</td>
</tr>
<tr>
<td><code>r</code></td>
<td>Read one byte (<code>r:1…255</code> for bulk reads).</td>
</tr>
<tr>
<td><code>0b</code></td>
<td>Write this binary value. Format is <code>0b00000000</code> for a byte, but partial bytes are also fine: <code>0b1001</code>.</td>
</tr>
<tr>
<td><code>0x</code></td>
<td>Write this HEX value. Format is <code>0x01</code>. Partial bytes are fine: <code>0xA</code>. A-F can be lower-case or capital letters.</td>
</tr>
<tr>
<td><code>0-255</code></td>
<td>Write this decimal value. Any number not preceded by <code>0x</code> or <code>0b</code> is interpreted as a decimal value.</td>
</tr>
<tr>
<td><code>&quot;xxx&quot;</code></td>
<td>Write the ASCII text <code>xxx</code> to the LCD.</td>
</tr>
<tr>
<td><code>,</code></td>
<td>Value delimiter. Use a comma or space to separate numbers. Any combination is fine, no delimiter is required between non-number values: <code>{0xa6,0, 0 16 5 0b111 0xaF}</code>.</td>
</tr>
<tr>
<td><code>&amp;</code></td>
<td>Delay 1uS. (<code>&amp;:1…255</code> for multiple delays)</td>
</tr>
<tr>
<td><code>(#)</code></td>
<td>Run macro, <code>(0)</code> for macro list</td>
</tr>
</tbody>
</table>
<h3 id="macro-4">Macro</h3>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0</code></td>
<td>Macro menu</td>
</tr>
<tr>
<td><code>1</code></td>
<td>LCD reset.</td>
</tr>
<tr>
<td><code>2</code></td>
<td>Init LCD.</td>
</tr>
<tr>
<td><code>3</code></td>
<td>Clear LCD.</td>
</tr>
<tr>
<td><code>4</code></td>
<td>Cursor position ex: <code>(4:0)</code>.</td>
</tr>
<tr>
<td><code>5</code></td>
<td>Write test text. (deprecated)</td>
</tr>
<tr>
<td><code>6</code></td>
<td>Write <code>:number</code> test numbers ex: <code>(6:80)</code>.</td>
</tr>
<tr>
<td><code>7</code></td>
<td>Write <code>:number</code> test characters ex: <code>(7:80)</code>.</td>
</tr>
</tbody>
</table>
<h2 id="pc-keyboard">PC keyboard</h2>
<ul>
<li><strong>Bus:</strong> PC keyboard interface library.</li>
<li><strong>Connections:</strong> Two pins (KBD/KBC) and ground.</li>
<li><strong>Output type:</strong> <a href="http://en.wikipedia.org/wiki/High_impedence">Open drain/open collector</a>.</li>
<li><strong>Pull-up resistors:</strong> <em>None</em>, keyboard has internal pull-ups.</li>
<li><strong>Maximum voltage:</strong> 5 volts.</li>
</ul>
<p>This library interfaces PC keyboards. A PC keyboard operates at 5 volts and has its own internal pull-up resistors to 5 volts. The keyboard issues a clock signal that drives all transactions, the library includes a time-out (v0h+) so the Buzzpirat won’t freeze if the keyboard doesn’t respond.</p>
<h3 id="syntax-7">Syntax</h3>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>A/a/@</code></td>
<td>Toggle auxiliary pin. Capital “A” sets AUX high, small “a” sets to ground. <code>@</code> sets aux to input (high impedance mode) and reads the pin value.</td>
</tr>
<tr>
<td><code>D/d</code></td>
<td>Measure voltage on the ADC pin (v1+ hardware only).</td>
</tr>
<tr>
<td><code>W/w</code></td>
<td>Capital ‘W’ enables the on-board power supplies. Small ‘w’ disables them. (v1+ hardware only).</td>
</tr>
<tr>
<td><code>r</code></td>
<td>Read one byte with timeout. (<code>r:1…255</code> for bulk reads)</td>
</tr>
<tr>
<td><code>0b</code></td>
<td>Write this binary value with timeout. Format is <code>0b00000000</code> for a byte, but partial bytes are also fine: <code>0b1001</code>.</td>
</tr>
<tr>
<td><code>0x</code></td>
<td>Write this HEX value with timeout. Format is <code>0x01</code>. Partial bytes are fine: <code>0xA</code>. A-F can be lower-case or capital letters.</td>
</tr>
<tr>
<td><code>0-255</code></td>
<td>Write this decimal value with timeout. Any number not preceded by <code>0x</code> or <code>0b</code> is interpreted as a decimal value.</td>
</tr>
<tr>
<td><code>,</code></td>
<td>Value delimiter. Use a comma or space to separate numbers. Any combination is fine, no delimiter is required between non-number values: <code>{0xa6,0, 0 16 5 0b111 0xaF}</code>.</td>
</tr>
<tr>
<td><code>&amp;</code></td>
<td>Delay 1uS. (<code>&amp;:1…255</code> for multiple delays)</td>
</tr>
<tr>
<td><code>(#)</code></td>
<td>Run macro, <code>(0)</code> for macro list</td>
</tr>
</tbody>
</table>
<h3 id="macro-5">Macro</h3>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0</code></td>
<td>Macro menu</td>
</tr>
<tr>
<td><code>1</code></td>
<td>Live keyboard monitor (v0h+)</td>
</tr>
</tbody>
</table>
<h2 id="dio">DIO</h2>
<p>This mode gives the user 100% control over the Buzzpirat IO pins from the terminal.</p>
<p>Send same command values as the binary bitbang mode to set pin direction and state.</p>
<h2 id="basic-script-reference">BASIC script reference</h2>
<p>BASIC script mode is entered by typing &rsquo;s&rsquo; at the Buzzpirat commandline. You need to take care of entering the correct mode and set it up (things like speed, Hiz, etc.).</p>
<p>This isn&rsquo;t intended as a guide in learning how to program. General programming knowledge is assumed. Be aware that only basic checking is done and there are no warnings printed to the terminal (except those intended by the program with print statements). The editor is very rudimentary and does not check if the syntax is right. The language is loosely based on BASIC.</p>
<p>Enter script mode:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>HiZ&gt; s
</span></span><span style="display:flex;"><span>HiZ(BASIC)&gt;
</span></span></code></pre></div><h3 id="new">NEW</h3>
<p>The memory is cleared by entering the NEW command.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>HiZ(BASIC)&gt; new
</span></span><span style="display:flex;"><span>Ready.
</span></span><span style="display:flex;"><span>HiZ(BASIC)&gt;
</span></span></code></pre></div><p>NOTE: With firmware before version 5.8 this command was mandatory before entering anything else in the basic editor!!</p>
<h3 id="list">LIST</h3>
<p>From the basic commandline programs can be entered. The basicinterpreter uses linenumbers followed by statements. After this the program can be listed by the command &lsquo;LIST&rsquo;</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>HiZ(BASIC)&gt; list
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>100 REM BASICDEMO
</span></span><span style="display:flex;"><span>110 PRINT &#34;HELLO WORLD!&#34;
</span></span><span style="display:flex;"><span>120 PRINT &#34;HELLO AGAIN&#34;
</span></span><span style="display:flex;"><span>65535 END
</span></span><span style="display:flex;"><span>52 bytes.
</span></span><span style="display:flex;"><span>Ready.
</span></span><span style="display:flex;"><span>HiZ(BASIC)&gt;
</span></span></code></pre></div><h3 id="run">RUN</h3>
<p>You can also run it with the command run:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>HiZ(BASIC)&gt; run
</span></span><span style="display:flex;"><span>HELLO WORLD!
</span></span><span style="display:flex;"><span>HELLO AGAIN
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Ready.
</span></span><span style="display:flex;"><span>HiZ(BASIC)&gt;
</span></span></code></pre></div><h3 id="variables">Variables</h3>
<p>A..Z (26) variables are possible. The variable are internally 16bit signed</p>
<h3 id="let">LET</h3>
<p>assigns a variable. Another variable, constants or functions that returns a value (e.g. RECEIVE)</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 LET A=B+1
</span></span></code></pre></div><h3 id="if-ifstat-then-truestat-else-falsestat">IF {ifstat} THEN {truestat} ELSE {falsestat}</h3>
<p>Evaluate the {ifstat} if it evaluate to a value that is not zero {truestat} get executed otherwise {falsestat}.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 IF A=1 THEN GOTO 100 ELSE PRINT &#34;A IS NOT 1&#34;
</span></span></code></pre></div><h3 id="goto-line">GOTO {line}</h3>
<p>jumps to line {line}, without remembering where it came from (see also GOSUB)</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 GOTO 100
</span></span><span style="display:flex;"><span>20 PRINT &#34;line 20&#34;
</span></span><span style="display:flex;"><span>100 PRINT &#34;line 100&#34;
</span></span></code></pre></div><p>line 20 doesn&rsquo;t get executed</p>
<h3 id="gosub-line-and-return">GOSUB {line} and RETURN</h3>
<p>jumps to line {line}, executes from there till a RETURN and return to the line after the GOSUB.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 GOSUB 1000
</span></span><span style="display:flex;"><span>20 PRINT &#34;line 20&#34;
</span></span><span style="display:flex;"><span>30 END
</span></span><span style="display:flex;"><span>1000 PRINT &#34;line 1000&#34;
</span></span><span style="display:flex;"><span>1010 RETURN
</span></span></code></pre></div><p>Stack is 10 levels deep, so 10 nested gosubs are possible.</p>
<h3 id="rem-text">REM {text}</h3>
<p>Puts a remark into the code, but gets skipped.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 REM A WONDERFULL PROGRAM
</span></span></code></pre></div><p>Don&rsquo;t use REM between DATA statements!</p>
<h3 id="print-text">PRINT {text}</h3>
<p>Prints {text} to the terminal. Variable and statement can be mixed and are seperated with a &lsquo;;&rsquo;. A &lsquo;;&rsquo; at the end suppresses a newline.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 PRINT &#34;A = &#34;;A
</span></span><span style="display:flex;"><span>20 PRINT &#34;RECEIVED: &#34;;RECEIVE
</span></span><span style="display:flex;"><span>30 PRINT &#34;B = &#34;;
</span></span><span style="display:flex;"><span>40 PRINT B
</span></span></code></pre></div><h3 id="input-questionvar">INPUT {question},{var}</h3>
<p>Ask {question} and put the answer the user gave into {var}</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 INPUT &#34;A = &#34;,A
</span></span></code></pre></div><h3 id="for-varminvalue-to-maxvalue-stats-next-var">FOR {var}={minvalue} TO {maxvalue} {stats} NEXT {var}</h3>
<p>Assigns value {minvalue} to variable {var}, executes statements {stats} until NEXT is encountered. Variable {var} wil be increased by one, {stats} is again executed, until {var} has the value {maxvalue}.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 FOR A=1 TO 10
</span></span><span style="display:flex;"><span>20 PRINT &#34;A = &#34;;A
</span></span><span style="display:flex;"><span>30 NEXT A
</span></span></code></pre></div><p>for/nexts can be nested 4 deep.</p>
<h3 id="read-var--data-val1-val2--val1-val2">READ {var} &amp; DATA {val1}, {val2}, .. {val1}, {val2},</h3>
<p>Read a value into variable {var}. The values are stored in DATA statements.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 READ A
</span></span><span style="display:flex;"><span>20 PRINT &#34;A = &#34;;A
</span></span><span style="display:flex;"><span>30 READ A
</span></span><span style="display:flex;"><span>40 PRINT &#34;A = &#34;;A
</span></span><span style="display:flex;"><span>1000 DATA 10,20
</span></span></code></pre></div><h3 id="start">START</h3>
<p>Same as the Buzzpirat &lsquo;[&rsquo; command</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 START
</span></span></code></pre></div><h3 id="stop">STOP</h3>
<p>Same as the Buzzpirat &lsquo;]&rsquo; command</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 STOP
</span></span></code></pre></div><h3 id="startr">STARTR</h3>
<p>Same as the Buzzpirat &lsquo;{&rsquo; command</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 STARTR
</span></span></code></pre></div><h3 id="stopr">STOPR</h3>
<p>Same as the Buzzpirat &lsquo;}&rsquo; command</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 STOPR
</span></span></code></pre></div><h3 id="send-valvar">SEND {val/var}</h3>
<p>Sends a value {val} or variable {var} over the bus.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 SEND 10
</span></span><span style="display:flex;"><span>20 SEND A
</span></span></code></pre></div><p>Some protocols send/receive at the same time. This is also possible:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 LET A=SEND 100
</span></span><span style="display:flex;"><span>20 PRINT &#34;SEND 100 GOT &#34;;A
</span></span></code></pre></div><h3 id="receive">RECEIVE</h3>
<p>Receives data from the bus. With some protocols it returns value &gt;255 to signal busstates (like no data, got ACK, etc), other protocols are 16 bit (like pic).</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 LET A=RECEIVE
</span></span><span style="display:flex;"><span>20 PRINT &#34;A = &#34;;A
</span></span></code></pre></div><h3 id="clk-val">CLK {val}</h3>
<p>Controls the CLK line, its behaviour depends on val; 0=low, 1=high, 2=pulse.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 CLK 2
</span></span></code></pre></div><h3 id="dat-val">DAT {val}</h3>
<p>Controls the DAT line, its behaviour depends on val; 0=low, 1=high.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 DAT 0
</span></span></code></pre></div><p>DAT value can also be read:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 LET A=DAT
</span></span><span style="display:flex;"><span>20 PRINT &#34;A = &#34;;A
</span></span></code></pre></div><h3 id="bitread">BITREAD</h3>
<p>Same as the Buzzpirat &lsquo;!&rsquo; command.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 LET A=BITREAD
</span></span><span style="display:flex;"><span>20 PRINT &#34;A = &#34;;A
</span></span></code></pre></div><h3 id="adc">ADC</h3>
<p>Reads the ADC. Value returned is 10bits (no conversion!).</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 LET A=ADC
</span></span><span style="display:flex;"><span>20 PRINT &#34;A = &#34;;A
</span></span></code></pre></div><h3 id="aux-val">AUX {val}</h3>
<p>Controls the AUX line, its behaviour depends on val; 0=low, 1=high.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 AUX 1
</span></span></code></pre></div><p>AUX value can also be read:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 LET A=AUX
</span></span><span style="display:flex;"><span>20 PRINT &#34;A = &#34;;A
</span></span></code></pre></div><h3 id="auxpin-val">AUXPIN {val}</h3>
<p>Controls which pin is controlled by the AUX statement; 0=AUX; 1=CS</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 AUXPIN 1
</span></span></code></pre></div><h3 id="psu-val">PSU {val}</h3>
<p>Controls the onboard voltage regulators; 0=off, 1=on</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 PSU 1
</span></span></code></pre></div><h3 id="pullup-val">PULLUP {val}</h3>
<p>Controls the onboard pullup resistors; 0=off, 1=on</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 PULLUP 0
</span></span></code></pre></div><h3 id="delay-var">DELAY {var}</h3>
<p>Delays {var} ms</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 DELAY 100
</span></span></code></pre></div><h3 id="freq-var--duty-var">FREQ {var} &amp; DUTY {var}</h3>
<p>Controls the onboard PWM generator. Frequency of 0 disables it. (same limits apply as regular PWM command (&lsquo;g&rsquo;))</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>10 freq 100
</span></span><span style="display:flex;"><span>20 duty 25
</span></span></code></pre></div>
  <div class="section-index">
    
    
    
    
    
    
    
    
    
</div>
<div class="text-muted mt-5 pt-3 border-top">
  Last modified November 27, 2023: <a href="https://github.com/therealdreg/buzzpiratweb/commit/ab35500426db2ab88f860f8c4a16dd5c7092904a">commit (ab35500)</a>
</div>
</div>

          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Email" aria-label="Email">
    <a target="_blank" rel="noopener" href="mailto:dreg@rootkit.es" aria-label="Email">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Twitter" aria-label="Twitter">
    <a target="_blank" rel="noopener" href="https://twitter.com/therealdreg" aria-label="Twitter">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-end text-xs-center order-sm-3">
        
        
        
      </div>
      <div class="td-footer__copyright-etc col-12 col-sm-4 text-center py-2 order-sm-2">
        
        
        
      </div>
    </div>
  </div>
</footer>
    </div>
    
  <script src="/js/main.min.99abe30f7fb05785a480d405ee1665ebd520cec6bbadffe966b7737e103675b8.js" integrity="sha256-mavjD3&#43;wV4WkgNQF7hZl69Ugzsa7rf/pZrdzfhA2dbg=" crossorigin="anonymous"></script>
<script defer src="/js/click-to-copy.min.f724d3de49218995223b7316aa2e53e2b34bf42026bf399ebb21bb02212402d1.js" integrity="sha256-9yTT3kkhiZUiO3MWqi5T4rNL9CAmvzmeuyG7AiEkAtE=" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>